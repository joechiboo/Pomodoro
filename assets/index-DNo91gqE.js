import{j as e,S as t,r,P as n,a as s,I as o,u as a,b as i,c as l,d as c,e as d,f as u,g as h,h as f,i as p,k as m,l as g,m as v,n as y,o as b,p as w,q as x,s as k,t as _,v as j,L as S,T,C as E,R as N}from"./ui-zPhXQOYm.js";import{a as C,b as P,g as O}from"./vendor-BCbkhpWz.js";import{c as A,R,P as D,a as I,C as $,T as M,B as L,b as B,X as U,Y as z,d as F,L as q,e as W}from"./charts-4APlYAoU.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var K,V={};var H=function(){if(K)return V;K=1;var e=C();return V.createRoot=e.createRoot,V.hydrateRoot=e.hydrateRoot,V}();const G=e=>{const t=Z(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),J(r,t)||X(e)},getConflictingClassGroupIds:(e,t)=>{const s=r[e]||[];return t&&n[e]?[...s,...n[e]]:s}}},J=(e,t)=>{if(0===e.length)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?J(e.slice(1),n):void 0;if(s)return s;if(0===t.validators.length)return;const o=e.join("-");return t.validators.find(({validator:e})=>e(o))?.classGroupId},Y=/^\[(.+)\]$/,X=e=>{if(Y.test(e)){const t=Y.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Z=e=>{const{theme:t,classGroups:r}=e,n={nextPart:new Map,validators:[]};for(const s in r)Q(r[s],n,s,t);return n},Q=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:ee(t,e)).classGroupId=r)}if("function"==typeof e)return te(e)?void Q(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,s])=>{Q(s,ee(t,e),r,n)})})},ee=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},te=e=>e.isThemeGetter,re=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(s,o)=>{r.set(s,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(s(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):s(e,t)}}},ne=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=e=>{const t=[];let r,n=0,s=0,o=0;for(let l=0;l<e.length;l++){let a=e[l];if(0===n&&0===s){if(":"===a){t.push(e.slice(o,l)),o=l+1;continue}if("/"===a){r=l;continue}}"["===a?n++:"]"===a?n--:"("===a?s++:")"===a&&s--}const a=0===t.length?e:e.substring(o),i=se(a);return{modifiers:t,hasImportantModifier:i!==a,baseClassName:i,maybePostfixModifierPosition:r&&r>o?r-o:void 0}};if(t){const e=t+":",r=n;n=t=>t.startsWith(e)?r(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(r){const e=n;n=t=>r({className:t,parseClassName:e})}return n},se=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,oe=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;const r=[];let n=[];return e.forEach(e=>{"["===e[0]||t[e]?(r.push(...n.sort(),e),n=[]):n.push(e)}),r.push(...n.sort()),r}},ae=/\s+/;function ie(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=le(e))&&(n&&(n+=" "),n+=t);return n}const le=e=>{if("string"==typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=le(e[n]))&&(r&&(r+=" "),r+=t);return r};function ce(e,...t){let r,n,s,o=function(i){const l=t.reduce((e,t)=>t(e),e());return r=(e=>({cache:re(e.cacheSize),parseClassName:ne(e),sortModifiers:oe(e),...G(e)}))(l),n=r.cache.get,s=r.cache.set,o=a,a(i)};function a(e){const t=n(e);if(t)return t;const o=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:o}=t,a=[],i=e.trim().split(ae);let l="";for(let c=i.length-1;c>=0;c-=1){const e=i[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:f}=r(e);if(t){l=e+(l.length>0?" "+l:l);continue}let p=!!f,m=n(p?h.substring(0,f):h);if(!m){if(!p){l=e+(l.length>0?" "+l:l);continue}if(m=n(h),!m){l=e+(l.length>0?" "+l:l);continue}p=!1}const g=o(d).join(":"),v=u?g+"!":g,y=v+m;if(a.includes(y))continue;a.push(y);const b=s(m,p);for(let r=0;r<b.length;++r){const e=b[r];a.push(v+e)}l=e+(l.length>0?" "+l:l)}return l})(e,r);return s(e,o),o}return function(){return o(ie.apply(null,arguments))}}const de=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},ue=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,he=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fe=/^\d+\/\d+$/,pe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,me=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ge=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ve=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ye=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,be=e=>fe.test(e),we=e=>!!e&&!Number.isNaN(Number(e)),xe=e=>!!e&&Number.isInteger(Number(e)),ke=e=>e.endsWith("%")&&we(e.slice(0,-1)),_e=e=>pe.test(e),je=()=>!0,Se=e=>me.test(e)&&!ge.test(e),Te=()=>!1,Ee=e=>ve.test(e),Ne=e=>ye.test(e),Ce=e=>!Oe(e)&&!Me(e),Pe=e=>We(e,Ge,Te),Oe=e=>ue.test(e),Ae=e=>We(e,Je,Se),Re=e=>We(e,Ye,we),De=e=>We(e,Ve,Te),Ie=e=>We(e,He,Ne),$e=e=>We(e,Ze,Ee),Me=e=>he.test(e),Le=e=>Ke(e,Je),Be=e=>Ke(e,Xe),Ue=e=>Ke(e,Ve),ze=e=>Ke(e,Ge),Fe=e=>Ke(e,He),qe=e=>Ke(e,Ze,!0),We=(e,t,r)=>{const n=ue.exec(e);return!!n&&(n[1]?t(n[1]):r(n[2]))},Ke=(e,t,r=!1)=>{const n=he.exec(e);return!!n&&(n[1]?t(n[1]):r)},Ve=e=>"position"===e||"percentage"===e,He=e=>"image"===e||"url"===e,Ge=e=>"length"===e||"size"===e||"bg-size"===e,Je=e=>"length"===e,Ye=e=>"number"===e,Xe=e=>"family-name"===e,Ze=e=>"shadow"===e,Qe=ce(()=>{const e=de("color"),t=de("font"),r=de("text"),n=de("font-weight"),s=de("tracking"),o=de("leading"),a=de("breakpoint"),i=de("container"),l=de("spacing"),c=de("radius"),d=de("shadow"),u=de("inset-shadow"),h=de("text-shadow"),f=de("drop-shadow"),p=de("blur"),m=de("perspective"),g=de("aspect"),v=de("ease"),y=de("animate"),b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Me,Oe],w=()=>[Me,Oe,l],x=()=>[be,"full","auto",...w()],k=()=>[xe,"none","subgrid",Me,Oe],_=()=>["auto",{span:["full",xe,Me,Oe]},xe,Me,Oe],j=()=>[xe,"auto",Me,Oe],S=()=>["auto","min","max","fr",Me,Oe],T=()=>["auto",...w()],E=()=>[be,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...w()],N=()=>[e,Me,Oe],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Ue,De,{position:[Me,Oe]}],P=()=>["auto","cover","contain",ze,Pe,{size:[Me,Oe]}],O=()=>[ke,Le,Ae],A=()=>["","none","full",c,Me,Oe],R=()=>["",we,Le,Ae],D=()=>[we,ke,Ue,De],I=()=>["","none",p,Me,Oe],$=()=>["none",we,Me,Oe],M=()=>["none",we,Me,Oe],L=()=>[we,Me,Oe],B=()=>[be,"full",...w()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[_e],breakpoint:[_e],color:[je],container:[_e],"drop-shadow":[_e],ease:["in","out","in-out"],font:[Ce],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[_e],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[_e],shadow:[_e],spacing:["px",we],text:[_e],"text-shadow":[_e],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",be,Oe,Me,g]}],container:["container"],columns:[{columns:[we,Oe,Me,i]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:x()}],"inset-x":[{"inset-x":x()}],"inset-y":[{"inset-y":x()}],start:[{start:x()}],end:[{end:x()}],top:[{top:x()}],right:[{right:x()}],bottom:[{bottom:x()}],left:[{left:x()}],visibility:["visible","invisible","collapse"],z:[{z:[xe,"auto",Me,Oe]}],basis:[{basis:[be,"full","auto",i,...w()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[we,be,"auto","initial","none",Oe]}],grow:[{grow:["",we,Me,Oe]}],shrink:[{shrink:["",we,Me,Oe]}],order:[{order:[xe,"first","last","none",Me,Oe]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:_()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:_()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":S()}],"auto-rows":[{"auto-rows":S()}],gap:[{gap:w()}],"gap-x":[{"gap-x":w()}],"gap-y":[{"gap-y":w()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:w()}],px:[{px:w()}],py:[{py:w()}],ps:[{ps:w()}],pe:[{pe:w()}],pt:[{pt:w()}],pr:[{pr:w()}],pb:[{pb:w()}],pl:[{pl:w()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":w()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":w()}],"space-y-reverse":["space-y-reverse"],size:[{size:E()}],w:[{w:[i,"screen",...E()]}],"min-w":[{"min-w":[i,"screen","none",...E()]}],"max-w":[{"max-w":[i,"screen","none","prose",{screen:[a]},...E()]}],h:[{h:["screen","lh",...E()]}],"min-h":[{"min-h":["screen","lh","none",...E()]}],"max-h":[{"max-h":["screen","lh",...E()]}],"font-size":[{text:["base",r,Le,Ae]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Me,Re]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ke,Oe]}],"font-family":[{font:[Be,Oe,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Me,Oe]}],"line-clamp":[{"line-clamp":[we,"none",Me,Re]}],leading:[{leading:[o,...w()]}],"list-image":[{"list-image":["none",Me,Oe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Me,Oe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:N()}],"text-color":[{text:N()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[we,"from-font","auto",Me,Ae]}],"text-decoration-color":[{decoration:N()}],"underline-offset":[{"underline-offset":[we,"auto",Me,Oe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:w()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me,Oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me,Oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:C()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},xe,Me,Oe],radial:["",Me,Oe],conic:[xe,Me,Oe]},Fe,Ie]}],"bg-color":[{bg:N()}],"gradient-from-pos":[{from:O()}],"gradient-via-pos":[{via:O()}],"gradient-to-pos":[{to:O()}],"gradient-from":[{from:N()}],"gradient-via":[{via:N()}],"gradient-to":[{to:N()}],rounded:[{rounded:A()}],"rounded-s":[{"rounded-s":A()}],"rounded-e":[{"rounded-e":A()}],"rounded-t":[{"rounded-t":A()}],"rounded-r":[{"rounded-r":A()}],"rounded-b":[{"rounded-b":A()}],"rounded-l":[{"rounded-l":A()}],"rounded-ss":[{"rounded-ss":A()}],"rounded-se":[{"rounded-se":A()}],"rounded-ee":[{"rounded-ee":A()}],"rounded-es":[{"rounded-es":A()}],"rounded-tl":[{"rounded-tl":A()}],"rounded-tr":[{"rounded-tr":A()}],"rounded-br":[{"rounded-br":A()}],"rounded-bl":[{"rounded-bl":A()}],"border-w":[{border:R()}],"border-w-x":[{"border-x":R()}],"border-w-y":[{"border-y":R()}],"border-w-s":[{"border-s":R()}],"border-w-e":[{"border-e":R()}],"border-w-t":[{"border-t":R()}],"border-w-r":[{"border-r":R()}],"border-w-b":[{"border-b":R()}],"border-w-l":[{"border-l":R()}],"divide-x":[{"divide-x":R()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":R()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:N()}],"border-color-x":[{"border-x":N()}],"border-color-y":[{"border-y":N()}],"border-color-s":[{"border-s":N()}],"border-color-e":[{"border-e":N()}],"border-color-t":[{"border-t":N()}],"border-color-r":[{"border-r":N()}],"border-color-b":[{"border-b":N()}],"border-color-l":[{"border-l":N()}],"divide-color":[{divide:N()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[we,Me,Oe]}],"outline-w":[{outline:["",we,Le,Ae]}],"outline-color":[{outline:N()}],shadow:[{shadow:["","none",d,qe,$e]}],"shadow-color":[{shadow:N()}],"inset-shadow":[{"inset-shadow":["none",u,qe,$e]}],"inset-shadow-color":[{"inset-shadow":N()}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:N()}],"ring-offset-w":[{"ring-offset":[we,Ae]}],"ring-offset-color":[{"ring-offset":N()}],"inset-ring-w":[{"inset-ring":R()}],"inset-ring-color":[{"inset-ring":N()}],"text-shadow":[{"text-shadow":["none",h,qe,$e]}],"text-shadow-color":[{"text-shadow":N()}],opacity:[{opacity:[we,Me,Oe]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[we]}],"mask-image-linear-from-pos":[{"mask-linear-from":D()}],"mask-image-linear-to-pos":[{"mask-linear-to":D()}],"mask-image-linear-from-color":[{"mask-linear-from":N()}],"mask-image-linear-to-color":[{"mask-linear-to":N()}],"mask-image-t-from-pos":[{"mask-t-from":D()}],"mask-image-t-to-pos":[{"mask-t-to":D()}],"mask-image-t-from-color":[{"mask-t-from":N()}],"mask-image-t-to-color":[{"mask-t-to":N()}],"mask-image-r-from-pos":[{"mask-r-from":D()}],"mask-image-r-to-pos":[{"mask-r-to":D()}],"mask-image-r-from-color":[{"mask-r-from":N()}],"mask-image-r-to-color":[{"mask-r-to":N()}],"mask-image-b-from-pos":[{"mask-b-from":D()}],"mask-image-b-to-pos":[{"mask-b-to":D()}],"mask-image-b-from-color":[{"mask-b-from":N()}],"mask-image-b-to-color":[{"mask-b-to":N()}],"mask-image-l-from-pos":[{"mask-l-from":D()}],"mask-image-l-to-pos":[{"mask-l-to":D()}],"mask-image-l-from-color":[{"mask-l-from":N()}],"mask-image-l-to-color":[{"mask-l-to":N()}],"mask-image-x-from-pos":[{"mask-x-from":D()}],"mask-image-x-to-pos":[{"mask-x-to":D()}],"mask-image-x-from-color":[{"mask-x-from":N()}],"mask-image-x-to-color":[{"mask-x-to":N()}],"mask-image-y-from-pos":[{"mask-y-from":D()}],"mask-image-y-to-pos":[{"mask-y-to":D()}],"mask-image-y-from-color":[{"mask-y-from":N()}],"mask-image-y-to-color":[{"mask-y-to":N()}],"mask-image-radial":[{"mask-radial":[Me,Oe]}],"mask-image-radial-from-pos":[{"mask-radial-from":D()}],"mask-image-radial-to-pos":[{"mask-radial-to":D()}],"mask-image-radial-from-color":[{"mask-radial-from":N()}],"mask-image-radial-to-color":[{"mask-radial-to":N()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[we]}],"mask-image-conic-from-pos":[{"mask-conic-from":D()}],"mask-image-conic-to-pos":[{"mask-conic-to":D()}],"mask-image-conic-from-color":[{"mask-conic-from":N()}],"mask-image-conic-to-color":[{"mask-conic-to":N()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:C()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Me,Oe]}],filter:[{filter:["","none",Me,Oe]}],blur:[{blur:I()}],brightness:[{brightness:[we,Me,Oe]}],contrast:[{contrast:[we,Me,Oe]}],"drop-shadow":[{"drop-shadow":["","none",f,qe,$e]}],"drop-shadow-color":[{"drop-shadow":N()}],grayscale:[{grayscale:["",we,Me,Oe]}],"hue-rotate":[{"hue-rotate":[we,Me,Oe]}],invert:[{invert:["",we,Me,Oe]}],saturate:[{saturate:[we,Me,Oe]}],sepia:[{sepia:["",we,Me,Oe]}],"backdrop-filter":[{"backdrop-filter":["","none",Me,Oe]}],"backdrop-blur":[{"backdrop-blur":I()}],"backdrop-brightness":[{"backdrop-brightness":[we,Me,Oe]}],"backdrop-contrast":[{"backdrop-contrast":[we,Me,Oe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",we,Me,Oe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[we,Me,Oe]}],"backdrop-invert":[{"backdrop-invert":["",we,Me,Oe]}],"backdrop-opacity":[{"backdrop-opacity":[we,Me,Oe]}],"backdrop-saturate":[{"backdrop-saturate":[we,Me,Oe]}],"backdrop-sepia":[{"backdrop-sepia":["",we,Me,Oe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":w()}],"border-spacing-x":[{"border-spacing-x":w()}],"border-spacing-y":[{"border-spacing-y":w()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Me,Oe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[we,"initial",Me,Oe]}],ease:[{ease:["linear","initial",v,Me,Oe]}],delay:[{delay:[we,Me,Oe]}],animate:[{animate:["none",y,Me,Oe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Me,Oe]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:$()}],"rotate-x":[{"rotate-x":$()}],"rotate-y":[{"rotate-y":$()}],"rotate-z":[{"rotate-z":$()}],scale:[{scale:M()}],"scale-x":[{"scale-x":M()}],"scale-y":[{"scale-y":M()}],"scale-z":[{"scale-z":M()}],"scale-3d":["scale-3d"],skew:[{skew:L()}],"skew-x":[{"skew-x":L()}],"skew-y":[{"skew-y":L()}],transform:[{transform:[Me,Oe,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:B()}],"translate-x":[{"translate-x":B()}],"translate-y":[{"translate-y":B()}],"translate-z":[{"translate-z":B()}],"translate-none":["translate-none"],accent:[{accent:N()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:N()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me,Oe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me,Oe]}],fill:[{fill:["none",...N()]}],"stroke-w":[{stroke:[we,Le,Ae,Re]}],stroke:[{stroke:["none",...N()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function et(...e){return Qe(A(e))}function tt({className:t,...r}){return e.jsx("div",{"data-slot":"card",className:et("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...r})}function rt({className:t,...r}){return e.jsx("div",{"data-slot":"card-header",className:et("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function nt({className:t,...r}){return e.jsx("h4",{"data-slot":"card-title",className:et("leading-none",t),...r})}function st({className:t,...r}){return e.jsx("p",{"data-slot":"card-description",className:et("text-muted-foreground",t),...r})}function ot({className:t,...r}){return e.jsx("div",{"data-slot":"card-content",className:et("px-6 [&:last-child]:pb-6",t),...r})}const at=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,it=A,lt=(e,t)=>r=>{var n;if(null==(null==t?void 0:t.variants))return it(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(e=>{const t=null==r?void 0:r[e],n=null==o?void 0:o[e];if(null===t)return null;const a=at(t)||at(n);return s[e][a]}),i=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...o,...i}[t]):{...o,...i}[t]===r})?[...e,r,n]:e},[]);return it(e,a,l,null==r?void 0:r.class,null==r?void 0:r.className)},ct=lt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function dt({className:r,variant:n,size:s,asChild:o=!1,...a}){const i=o?t:"button";return e.jsx(i,{"data-slot":"button",className:et(ct({variant:n,size:s,className:r})),...a})}function ut({className:t,type:r,...n}){return e.jsx("input",{type:r,"data-slot":"input",className:et("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var ht=r.forwardRef((t,r)=>e.jsx(n.label,{...t,ref:r,onMouseDown:e=>{e.target.closest("button, input, select, textarea")||(t.onMouseDown?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));ht.displayName="Label";var ft=ht;function pt({className:t,...r}){return e.jsx(ft,{"data-slot":"label",className:et("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}function mt({className:t,value:r,...n}){return e.jsx(s,{"data-slot":"progress",className:et("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:e.jsx(o,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})})}
/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},vt=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();
/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var yt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=r.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:a,iconNode:i,...l},c)=>r.createElement("svg",{ref:c,...yt,width:t,height:t,stroke:e,strokeWidth:s?24*Number(n)/Number(t):n,className:vt("lucide",o),...l},[...i.map(([e,t])=>r.createElement(e,t)),...Array.isArray(a)?a:[a]])),wt=(e,t)=>{const n=r.forwardRef(({className:n,...s},o)=>{return r.createElement(bt,{ref:o,iconNode:t,className:vt(`lucide-${a=gt(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...s});var a});return n.displayName=gt(e),n},xt=wt("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),kt=wt("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),_t=wt("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),jt=wt("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),St=wt("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Tt=wt("cloud-off",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]),Et=wt("coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),Nt=wt("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Ct=wt("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Pt=wt("log-in",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Ot=wt("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),At=wt("pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),Rt=wt("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Dt=wt("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),It=wt("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),$t=wt("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Mt=wt("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Lt=wt("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Bt=wt("skip-forward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),Ut=wt("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),zt=wt("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Ft=wt("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),qt=wt("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Wt=wt("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Kt=wt("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),Vt=wt("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ht,Gt="dismissableLayer.update",Jt="dismissableLayer.pointerDownOutside",Yt="dismissableLayer.focusOutside",Xt=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zt=r.forwardRef((t,s)=>{const{disableOutsidePointerEvents:o=!1,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:f,...p}=t,m=r.useContext(Xt),[g,v]=r.useState(null),y=g?.ownerDocument??globalThis?.document,[,b]=r.useState({}),w=i(s,e=>v(e)),x=Array.from(m.layers),[k]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(k),j=g?x.indexOf(g):-1,S=m.layersWithOutsidePointerEventsDisabled.size>0,T=j>=_,E=function(e,t=globalThis?.document){const n=a(e),s=r.useRef(!1),o=r.useRef(()=>{});return r.useEffect(()=>{const e=e=>{if(e.target&&!s.current){let r=function(){er(Jt,n,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",o.current),o.current=r,t.addEventListener("click",o.current,{once:!0})):r()}else t.removeEventListener("click",o.current);s.current=!1},r=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(r),t.removeEventListener("pointerdown",e),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}(e=>{const t=e.target,r=[...m.branches].some(e=>e.contains(t));T&&!r&&(d?.(e),h?.(e),e.defaultPrevented||f?.())},y),N=function(e,t=globalThis?.document){const n=a(e),s=r.useRef(!1);return r.useEffect(()=>{const e=e=>{if(e.target&&!s.current){er(Yt,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}(e=>{const t=e.target;[...m.branches].some(e=>e.contains(t))||(u?.(e),h?.(e),e.defaultPrevented||f?.())},y);return function(e,t=globalThis?.document){const n=a(e);r.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{j===m.layers.size-1&&(c?.(e),!e.defaultPrevented&&f&&(e.preventDefault(),f()))},y),r.useEffect(()=>{if(g)return o&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(Ht=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(g)),m.layers.add(g),Qt(),()=>{o&&1===m.layersWithOutsidePointerEventsDisabled.size&&(y.body.style.pointerEvents=Ht)}},[g,y,o,m]),r.useEffect(()=>()=>{g&&(m.layers.delete(g),m.layersWithOutsidePointerEventsDisabled.delete(g),Qt())},[g,m]),r.useEffect(()=>{const e=()=>b({});return document.addEventListener(Gt,e),()=>document.removeEventListener(Gt,e)},[]),e.jsx(n.div,{...p,ref:w,style:{pointerEvents:S?T?"auto":"none":void 0,...t.style},onFocusCapture:l(t.onFocusCapture,N.onFocusCapture),onBlurCapture:l(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:l(t.onPointerDownCapture,E.onPointerDownCapture)})});Zt.displayName="DismissableLayer";function Qt(){const e=new CustomEvent(Gt);document.dispatchEvent(e)}function er(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?c(s,o):s.dispatchEvent(o)}r.forwardRef((t,s)=>{const o=r.useContext(Xt),a=r.useRef(null),l=i(s,a);return r.useEffect(()=>{const e=a.current;if(e)return o.branches.add(e),()=>{o.branches.delete(e)}},[o.branches]),e.jsx(n.div,{...t,ref:l})}).displayName="DismissableLayerBranch";var tr=0;function rr(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var nr="focusScope.autoFocusOnMount",sr="focusScope.autoFocusOnUnmount",or={bubbles:!1,cancelable:!0},ar=r.forwardRef((t,s)=>{const{loop:o=!1,trapped:l=!1,onMountAutoFocus:c,onUnmountAutoFocus:d,...u}=t,[h,f]=r.useState(null),p=a(c),m=a(d),g=r.useRef(null),v=i(s,e=>f(e)),y=r.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;r.useEffect(()=>{if(l){let e=function(e){if(y.paused||!h)return;const t=e.target;h.contains(t)?g.current=t:dr(g.current,{select:!0})},t=function(e){if(y.paused||!h)return;const t=e.relatedTarget;null!==t&&(h.contains(t)||dr(g.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&dr(h)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return h&&n.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[l,h,y.paused]),r.useEffect(()=>{if(h){ur.add(y);const t=document.activeElement;if(!h.contains(t)){const r=new CustomEvent(nr,or);h.addEventListener(nr,p),h.dispatchEvent(r),r.defaultPrevented||(!function(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(dr(n,{select:t}),document.activeElement!==r)return}((e=ir(h),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&dr(h))}return()=>{h.removeEventListener(nr,p),setTimeout(()=>{const e=new CustomEvent(sr,or);h.addEventListener(sr,m),h.dispatchEvent(e),e.defaultPrevented||dr(t??document.body,{select:!0}),h.removeEventListener(sr,m),ur.remove(y)},0)}}var e},[h,p,m,y]);const b=r.useCallback(e=>{if(!o&&!l)return;if(y.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){const t=e.currentTarget,[n,s]=function(e){const t=ir(e),r=lr(t,e),n=lr(t.reverse(),e);return[r,n]}(t);n&&s?e.shiftKey||r!==s?e.shiftKey&&r===n&&(e.preventDefault(),o&&dr(s,{select:!0})):(e.preventDefault(),o&&dr(n,{select:!0})):r===t&&e.preventDefault()}},[o,l,y.paused]);return e.jsx(n.div,{tabIndex:-1,...u,ref:v,onKeyDown:b})});function ir(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function lr(e,t){for(const r of e)if(!cr(r,{upTo:t}))return r}function cr(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function dr(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}ar.displayName="FocusScope";var ur=function(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=hr(e,t),e.unshift(t)},remove(t){e=hr(e,t),e[0]?.resume()}}}();function hr(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}const fr=["top","right","bottom","left"],pr=Math.min,mr=Math.max,gr=Math.round,vr=Math.floor,yr=e=>({x:e,y:e}),br={left:"right",right:"left",bottom:"top",top:"bottom"},wr={start:"end",end:"start"};function xr(e,t,r){return mr(e,pr(t,r))}function kr(e,t){return"function"==typeof e?e(t):e}function _r(e){return e.split("-")[0]}function jr(e){return e.split("-")[1]}function Sr(e){return"x"===e?"y":"x"}function Tr(e){return"y"===e?"height":"width"}const Er=new Set(["top","bottom"]);function Nr(e){return Er.has(_r(e))?"y":"x"}function Cr(e){return Sr(Nr(e))}function Pr(e){return e.replace(/start|end/g,e=>wr[e])}const Or=["left","right"],Ar=["right","left"],Rr=["top","bottom"],Dr=["bottom","top"];function Ir(e,t,r,n){const s=jr(e);let o=function(e,t,r){switch(e){case"top":case"bottom":return r?t?Ar:Or:t?Or:Ar;case"left":case"right":return t?Rr:Dr;default:return[]}}(_r(e),"start"===r,n);return s&&(o=o.map(e=>e+"-"+s),t&&(o=o.concat(o.map(Pr)))),o}function $r(e){return e.replace(/left|right|bottom|top/g,e=>br[e])}function Mr(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Lr(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Br(e,t,r){let{reference:n,floating:s}=e;const o=Nr(t),a=Cr(t),i=Tr(a),l=_r(t),c="y"===o,d=n.x+n.width/2-s.width/2,u=n.y+n.height/2-s.height/2,h=n[i]/2-s[i]/2;let f;switch(l){case"top":f={x:d,y:n.y-s.height};break;case"bottom":f={x:d,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:u};break;case"left":f={x:n.x-s.width,y:u};break;default:f={x:n.x,y:n.y}}switch(jr(t)){case"start":f[a]-=h*(r&&c?-1:1);break;case"end":f[a]+=h*(r&&c?-1:1)}return f}async function Ur(e,t){var r;void 0===t&&(t={});const{x:n,y:s,platform:o,rects:a,elements:i,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:f=0}=kr(t,e),p=Mr(f),m=i[h?"floating"===u?"reference":"floating":u],g=Lr(await o.getClippingRect({element:null==(r=await(null==o.isElement?void 0:o.isElement(m)))||r?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(i.floating)),boundary:c,rootBoundary:d,strategy:l})),v="floating"===u?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,y=await(null==o.getOffsetParent?void 0:o.getOffsetParent(i.floating)),b=await(null==o.isElement?void 0:o.isElement(y))&&await(null==o.getScale?void 0:o.getScale(y))||{x:1,y:1},w=Lr(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-w.top+p.top)/b.y,bottom:(w.bottom-g.bottom+p.bottom)/b.y,left:(g.left-w.left+p.left)/b.x,right:(w.right-g.right+p.right)/b.x}}function zr(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Fr(e){return fr.some(t=>e[t]>=0)}const qr=new Set(["left","top"]);function Wr(){return"undefined"!=typeof window}function Kr(e){return Gr(e)?(e.nodeName||"").toLowerCase():"#document"}function Vr(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Hr(e){var t;return null==(t=(Gr(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Gr(e){return!!Wr()&&(e instanceof Node||e instanceof Vr(e).Node)}function Jr(e){return!!Wr()&&(e instanceof Element||e instanceof Vr(e).Element)}function Yr(e){return!!Wr()&&(e instanceof HTMLElement||e instanceof Vr(e).HTMLElement)}function Xr(e){return!(!Wr()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Vr(e).ShadowRoot)}const Zr=new Set(["inline","contents"]);function Qr(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=hn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!Zr.has(s)}const en=new Set(["table","td","th"]);function tn(e){return en.has(Kr(e))}const rn=[":popover-open",":modal"];function nn(e){return rn.some(t=>{try{return e.matches(t)}catch(r){return!1}})}const sn=["transform","translate","scale","rotate","perspective"],on=["transform","translate","scale","rotate","perspective","filter"],an=["paint","layout","strict","content"];function ln(e){const t=cn(),r=Jr(e)?hn(e):e;return sn.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||on.some(e=>(r.willChange||"").includes(e))||an.some(e=>(r.contain||"").includes(e))}function cn(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const dn=new Set(["html","body","#document"]);function un(e){return dn.has(Kr(e))}function hn(e){return Vr(e).getComputedStyle(e)}function fn(e){return Jr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function pn(e){if("html"===Kr(e))return e;const t=e.assignedSlot||e.parentNode||Xr(e)&&e.host||Hr(e);return Xr(t)?t.host:t}function mn(e){const t=pn(e);return un(t)?e.ownerDocument?e.ownerDocument.body:e.body:Yr(t)&&Qr(t)?t:mn(t)}function gn(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const s=mn(e),o=s===(null==(n=e.ownerDocument)?void 0:n.body),a=Vr(s);if(o){const e=vn(a);return t.concat(a,a.visualViewport||[],Qr(s)?s:[],e&&r?gn(e):[])}return t.concat(s,gn(s,[],r))}function vn(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function yn(e){const t=hn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Yr(e),o=s?e.offsetWidth:r,a=s?e.offsetHeight:n,i=gr(r)!==o||gr(n)!==a;return i&&(r=o,n=a),{width:r,height:n,$:i}}function bn(e){return Jr(e)?e:e.contextElement}function wn(e){const t=bn(e);if(!Yr(t))return yr(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=yn(t);let a=(o?gr(r.width):r.width)/n,i=(o?gr(r.height):r.height)/s;return a&&Number.isFinite(a)||(a=1),i&&Number.isFinite(i)||(i=1),{x:a,y:i}}const xn=yr(0);function kn(e){const t=Vr(e);return cn()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:xn}function _n(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const s=e.getBoundingClientRect(),o=bn(e);let a=yr(1);t&&(n?Jr(n)&&(a=wn(n)):a=wn(e));const i=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==Vr(e))&&t}(o,r,n)?kn(o):yr(0);let l=(s.left+i.x)/a.x,c=(s.top+i.y)/a.y,d=s.width/a.x,u=s.height/a.y;if(o){const e=Vr(o),t=n&&Jr(n)?Vr(n):n;let r=e,s=vn(r);for(;s&&n&&t!==r;){const e=wn(s),t=s.getBoundingClientRect(),n=hn(s),o=t.left+(s.clientLeft+parseFloat(n.paddingLeft))*e.x,a=t.top+(s.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=o,c+=a,r=Vr(s),s=vn(r)}}return Lr({width:d,height:u,x:l,y:c})}function jn(e,t){const r=fn(e).scrollLeft;return t?t.left+r:_n(Hr(e)).left+r}function Sn(e,t){const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-jn(e,r),y:r.top+t.scrollTop}}const Tn=new Set(["absolute","fixed"]);function En(e,t,r){let n;if("viewport"===t)n=function(e,t){const r=Vr(e),n=Hr(e),s=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,i=0,l=0;if(s){o=s.width,a=s.height;const e=cn();(!e||e&&"fixed"===t)&&(i=s.offsetLeft,l=s.offsetTop)}const c=jn(n);if(c<=0){const e=n.ownerDocument,t=e.body,r=getComputedStyle(t),s="CSS1Compat"===e.compatMode&&parseFloat(r.marginLeft)+parseFloat(r.marginRight)||0,a=Math.abs(n.clientWidth-t.clientWidth-s);a<=25&&(o-=a)}else c<=25&&(o+=c);return{width:o,height:a,x:i,y:l}}(e,r);else if("document"===t)n=function(e){const t=Hr(e),r=fn(e),n=e.ownerDocument.body,s=mr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=mr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+jn(e);const i=-r.scrollTop;return"rtl"===hn(n).direction&&(a+=mr(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:a,y:i}}(Hr(e));else if(Jr(t))n=function(e,t){const r=_n(e,!0,"fixed"===t),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=Yr(e)?wn(e):yr(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:s*o.x,y:n*o.y}}(t,r);else{const r=kn(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Lr(n)}function Nn(e,t){const r=pn(e);return!(r===t||!Jr(r)||un(r))&&("fixed"===hn(r).position||Nn(r,t))}function Cn(e,t,r){const n=Yr(t),s=Hr(t),o="fixed"===r,a=_n(e,!0,o,t);let i={scrollLeft:0,scrollTop:0};const l=yr(0);function c(){l.x=jn(s)}if(n||!n&&!o)if(("body"!==Kr(t)||Qr(s))&&(i=fn(t)),n){const e=_n(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else s&&c();o&&!n&&s&&c();const d=!s||n||o?yr(0):Sn(s,i);return{x:a.left+i.scrollLeft-l.x-d.x,y:a.top+i.scrollTop-l.y-d.y,width:a.width,height:a.height}}function Pn(e){return"static"===hn(e).position}function On(e,t){if(!Yr(e)||"fixed"===hn(e).position)return null;if(t)return t(e);let r=e.offsetParent;return Hr(e)===r&&(r=r.ownerDocument.body),r}function An(e,t){const r=Vr(e);if(nn(e))return r;if(!Yr(e)){let t=pn(e);for(;t&&!un(t);){if(Jr(t)&&!Pn(t))return t;t=pn(t)}return r}let n=On(e,t);for(;n&&tn(n)&&Pn(n);)n=On(n,t);return n&&un(n)&&Pn(n)&&!ln(n)?r:n||function(e){let t=pn(e);for(;Yr(t)&&!un(t);){if(ln(t))return t;if(nn(t))return null;t=pn(t)}return null}(e)||r}const Rn={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o="fixed"===s,a=Hr(n),i=!!t&&nn(t.floating);if(n===a||i&&o)return r;let l={scrollLeft:0,scrollTop:0},c=yr(1);const d=yr(0),u=Yr(n);if((u||!u&&!o)&&(("body"!==Kr(n)||Qr(a))&&(l=fn(n)),Yr(n))){const e=_n(n);c=wn(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}const h=!a||u||o?yr(0):Sn(a,l);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:r.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:Hr,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[..."clippingAncestors"===r?nn(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let n=gn(e,[],!1).filter(e=>Jr(e)&&"body"!==Kr(e)),s=null;const o="fixed"===hn(e).position;let a=o?pn(e):e;for(;Jr(a)&&!un(a);){const t=hn(a),r=ln(a);r||"fixed"!==t.position||(s=null),(o?!r&&!s:!r&&"static"===t.position&&s&&Tn.has(s.position)||Qr(a)&&!r&&Nn(e,a))?n=n.filter(e=>e!==a):s=t,a=pn(a)}return t.set(e,n),n}(t,this._c):[].concat(r),n],a=o[0],i=o.reduce((e,r)=>{const n=En(t,r,s);return e.top=mr(n.top,e.top),e.right=pr(n.right,e.right),e.bottom=pr(n.bottom,e.bottom),e.left=mr(n.left,e.left),e},En(t,a,s));return{width:i.right-i.left,height:i.bottom-i.top,x:i.left,y:i.top}},getOffsetParent:An,getElementRects:async function(e){const t=this.getOffsetParent||An,r=this.getDimensions,n=await r(e.floating);return{reference:Cn(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=yn(e);return{width:t,height:r}},getScale:wn,isElement:Jr,isRTL:function(e){return"rtl"===hn(e).direction}};function Dn(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function In(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:i="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,c=bn(e),d=s||o?[...c?gn(c):[],...gn(t)]:[];d.forEach(e=>{s&&e.addEventListener("scroll",r,{passive:!0}),o&&e.addEventListener("resize",r)});const u=c&&i?function(e,t){let r,n=null;const s=Hr(e);function o(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function a(i,l){void 0===i&&(i=!1),void 0===l&&(l=1),o();const c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:f}=c;if(i||t(),!h||!f)return;const p={rootMargin:-vr(u)+"px "+-vr(s.clientWidth-(d+h))+"px "+-vr(s.clientHeight-(u+f))+"px "+-vr(d)+"px",threshold:mr(0,pr(1,l))||1};let m=!0;function g(t){const n=t[0].intersectionRatio;if(n!==l){if(!m)return a();n?a(!1,n):r=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==n||Dn(c,e.getBoundingClientRect())||a(),m=!1}try{n=new IntersectionObserver(g,{...p,root:s.ownerDocument})}catch(v){n=new IntersectionObserver(g,p)}n.observe(e)}(!0),o}(c,r):null;let h,f=-1,p=null;a&&(p=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),c&&!l&&p.observe(c),p.observe(t));let m=l?_n(e):null;return l&&function t(){const n=_n(e);m&&!Dn(m,n)&&r();m=n,h=requestAnimationFrame(t)}(),r(),()=>{var e;d.forEach(e=>{s&&e.removeEventListener("scroll",r),o&&e.removeEventListener("resize",r)}),null==u||u(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const $n=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:a,middlewareData:i}=t,l=await async function(e,t){const{placement:r,platform:n,elements:s}=e,o=await(null==n.isRTL?void 0:n.isRTL(s.floating)),a=_r(r),i=jr(r),l="y"===Nr(r),c=qr.has(a)?-1:1,d=o&&l?-1:1,u=kr(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return i&&"number"==typeof p&&(f="end"===i?-1*p:p),l?{x:f*d,y:h*c}:{x:h*c,y:f*d}}(t,e);return a===(null==(r=i.offset)?void 0:r.placement)&&null!=(n=i.arrow)&&n.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:a}}}}},Mn=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:i={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=kr(e,t),c={x:r,y:n},d=await Ur(t,l),u=Nr(_r(s)),h=Sr(u);let f=c[h],p=c[u];if(o){const e="y"===h?"bottom":"right";f=xr(f+d["y"===h?"top":"left"],f,f-d[e])}if(a){const e="y"===u?"bottom":"right";p=xr(p+d["y"===u?"top":"left"],p,p-d[e])}const m=i.fn({...t,[h]:f,[u]:p});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[h]:o,[u]:a}}}}}},Ln=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:a,initialPlacement:i,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=kr(e,t);if(null!=(r=o.arrow)&&r.alignmentOffset)return{};const v=_r(s),y=Nr(i),b=_r(i)===i,w=await(null==l.isRTL?void 0:l.isRTL(c.floating)),x=h||(b||!m?[$r(i)]:function(e){const t=$r(e);return[Pr(e),t,Pr(t)]}(i)),k="none"!==p;!h&&k&&x.push(...Ir(i,m,p,w));const _=[i,...x],j=await Ur(t,g),S=[];let T=(null==(n=o.flip)?void 0:n.overflows)||[];if(d&&S.push(j[v]),u){const e=function(e,t,r){void 0===r&&(r=!1);const n=jr(e),s=Cr(e),o=Tr(s);let a="x"===s?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=$r(a)),[a,$r(a)]}(s,a,w);S.push(j[e[0]],j[e[1]])}if(T=[...T,{placement:s,overflows:S}],!S.every(e=>e<=0)){var E,N;const e=((null==(E=o.flip)?void 0:E.index)||0)+1,t=_[e];if(t){if(!("alignment"===u&&y!==Nr(t))||T.every(e=>Nr(e.placement)!==y||e.overflows[0]>0))return{data:{index:e,overflows:T},reset:{placement:t}}}let r=null==(N=T.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:N.placement;if(!r)switch(f){case"bestFit":{var C;const e=null==(C=T.filter(e=>{if(k){const t=Nr(e.placement);return t===y||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:C[0];e&&(r=e);break}case"initialPlacement":r=i}if(s!==r)return{reset:{placement:r}}}return{}}}},Bn=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:o,platform:a,elements:i}=t,{apply:l=()=>{},...c}=kr(e,t),d=await Ur(t,c),u=_r(s),h=jr(s),f="y"===Nr(s),{width:p,height:m}=o.floating;let g,v;"top"===u||"bottom"===u?(g=u,v=h===(await(null==a.isRTL?void 0:a.isRTL(i.floating))?"start":"end")?"left":"right"):(v=u,g="end"===h?"top":"bottom");const y=m-d.top-d.bottom,b=p-d.left-d.right,w=pr(m-d[g],y),x=pr(p-d[v],b),k=!t.middlewareData.shift;let _=w,j=x;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(j=b),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(_=y),k&&!h){const e=mr(d.left,0),t=mr(d.right,0),r=mr(d.top,0),n=mr(d.bottom,0);f?j=p-2*(0!==e||0!==t?e+t:mr(d.left,d.right)):_=m-2*(0!==r||0!==n?r+n:mr(d.top,d.bottom))}await l({...t,availableWidth:j,availableHeight:_});const S=await a.getDimensions(i.floating);return p!==S.width||m!==S.height?{reset:{rects:!0}}:{}}}},Un=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=kr(e,t);switch(n){case"referenceHidden":{const e=zr(await Ur(t,{...s,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Fr(e)}}}case"escaped":{const e=zr(await Ur(t,{...s,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:Fr(e)}}}default:return{}}}}},zn=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:a,elements:i,middlewareData:l}=t,{element:c,padding:d=0}=kr(e,t)||{};if(null==c)return{};const u=Mr(d),h={x:r,y:n},f=Cr(s),p=Tr(f),m=await a.getDimensions(c),g="y"===f,v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=o.reference[p]+o.reference[f]-h[f]-o.floating[p],x=h[f]-o.reference[f],k=await(null==a.getOffsetParent?void 0:a.getOffsetParent(c));let _=k?k[b]:0;_&&await(null==a.isElement?void 0:a.isElement(k))||(_=i.floating[b]||o.floating[p]);const j=w/2-x/2,S=_/2-m[p]/2-1,T=pr(u[v],S),E=pr(u[y],S),N=T,C=_-m[p]-E,P=_/2-m[p]/2+j,O=xr(N,P,C),A=!l.arrow&&null!=jr(s)&&P!==O&&o.reference[p]/2-(P<N?T:E)-m[p]/2<0,R=A?P<N?P-N:P-C:0;return{[f]:h[f]+R,data:{[f]:O,centerOffset:P-O-R,...A&&{alignmentOffset:R}},reset:A}}}),Fn=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:o,middlewareData:a}=t,{offset:i=0,mainAxis:l=!0,crossAxis:c=!0}=kr(e,t),d={x:r,y:n},u=Nr(s),h=Sr(u);let f=d[h],p=d[u];const m=kr(i,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===h?"height":"width",t=o.reference[h]-o.floating[e]+g.mainAxis,r=o.reference[h]+o.reference[e]-g.mainAxis;f<t?f=t:f>r&&(f=r)}if(c){var v,y;const e="y"===h?"width":"height",t=qr.has(_r(s)),r=o.reference[u]-o.floating[e]+(t&&(null==(v=a.offset)?void 0:v[u])||0)+(t?0:g.crossAxis),n=o.reference[u]+o.reference[e]+(t?0:(null==(y=a.offset)?void 0:y[u])||0)-(t?g.crossAxis:0);p<r?p=r:p>n&&(p=n)}return{[h]:f,[u]:p}}}},qn=(e,t,r)=>{const n=new Map,s={platform:Rn,...r},o={...s.platform,_c:n};return(async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:a}=r,i=o.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:u}=Br(c,n,l),h=n,f={},p=0;for(let m=0;m<i.length;m++){const{name:r,fn:o}=i[m],{x:g,y:v,data:y,reset:b}=await o({x:d,y:u,initialPlacement:n,placement:h,strategy:s,middlewareData:f,rects:c,platform:a,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=v?v:u,f={...f,[r]:{...f[r],...y}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:s}):b.rects),({x:d,y:u}=Br(c,h,l))),m=-1)}return{x:d,y:u,placement:h,strategy:s,middlewareData:f}})(e,t,{...s,platform:o})};var Wn="undefined"!=typeof document?r.useLayoutEffect:function(){};function Kn(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!==n--;)if(!Kn(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;0!==n--;){const r=s[n];if(("_owner"!==r||!e.$$typeof)&&!Kn(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function Vn(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Hn(e,t){const r=Vn(e);return Math.round(t*r)/r}function Gn(e){const t=r.useRef(e);return Wn(()=>{t.current=e}),t}const Jn=e=>({name:"arrow",options:e,fn(t){const{element:r,padding:n}="function"==typeof e?e(t):e;return r&&(s=r,{}.hasOwnProperty.call(s,"current"))?null!=r.current?zn({element:r.current,padding:n}).fn(t):{}:r?zn({element:r,padding:n}).fn(t):{};var s}}),Yn=(e,t)=>({...$n(e),options:[e,t]}),Xn=(e,t)=>({...Mn(e),options:[e,t]}),Zn=(e,t)=>({...Fn(e),options:[e,t]}),Qn=(e,t)=>({...Ln(e),options:[e,t]}),es=(e,t)=>({...Bn(e),options:[e,t]}),ts=(e,t)=>({...Un(e),options:[e,t]}),rs=(e,t)=>({...Jn(e),options:[e,t]});var ns=r.forwardRef((t,r)=>{const{children:s,width:o=10,height:a=5,...i}=t;return e.jsx(n.svg,{...i,ref:r,width:o,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});ns.displayName="Arrow";var ss=ns;function os(e){const[t,n]=r.useState(void 0);return u(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let s,o;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,o=t.blockSize}else s=e.offsetWidth,o=e.offsetHeight;n({width:s,height:o})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}var as="Popper",[is,ls]=h(as),[cs,ds]=is(as),us=t=>{const{__scopePopper:n,children:s}=t,[o,a]=r.useState(null);return e.jsx(cs,{scope:n,anchor:o,onAnchorChange:a,children:s})};us.displayName=as;var hs="PopperAnchor",fs=r.forwardRef((t,s)=>{const{__scopePopper:o,virtualRef:a,...l}=t,c=ds(hs,o),d=r.useRef(null),u=i(s,d),h=r.useRef(null);return r.useEffect(()=>{const e=h.current;h.current=a?.current||d.current,e!==h.current&&c.onAnchorChange(h.current)}),a?null:e.jsx(n.div,{...l,ref:u})});fs.displayName=hs;var ps="PopperContent",[ms,gs]=is(ps),vs=r.forwardRef((t,s)=>{const{__scopePopper:o,side:l="bottom",sideOffset:c=0,align:h="center",alignOffset:f=0,arrowPadding:p=0,avoidCollisions:m=!0,collisionBoundary:g=[],collisionPadding:v=0,sticky:y="partial",hideWhenDetached:b=!1,updatePositionStrategy:w="optimized",onPlaced:x,...k}=t,_=ds(ps,o),[j,S]=r.useState(null),T=i(s,e=>S(e)),[E,N]=r.useState(null),C=os(E),P=C?.width??0,O=C?.height??0,A=l+("center"!==h?"-"+h:""),R="number"==typeof v?v:{top:0,right:0,bottom:0,left:0,...v},D=Array.isArray(g)?g:[g],I=D.length>0,$={padding:R,boundary:D.filter(xs),altBoundary:I},{refs:M,floatingStyles:L,placement:B,isPositioned:U,middlewareData:z}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:o,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[h,f]=r.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=r.useState(s);Kn(p,s)||m(s);const[g,v]=r.useState(null),[y,b]=r.useState(null),w=r.useCallback(e=>{e!==j.current&&(j.current=e,v(e))},[]),x=r.useCallback(e=>{e!==S.current&&(S.current=e,b(e))},[]),k=a||g,_=i||y,j=r.useRef(null),S=r.useRef(null),T=r.useRef(h),E=null!=c,N=Gn(c),C=Gn(o),P=Gn(u),O=r.useCallback(()=>{if(!j.current||!S.current)return;const e={placement:t,strategy:n,middleware:p};C.current&&(e.platform=C.current),qn(j.current,S.current,e).then(e=>{const t={...e,isPositioned:!1!==P.current};A.current&&!Kn(T.current,t)&&(T.current=t,d.flushSync(()=>{f(t)}))})},[p,t,n,C,P]);Wn(()=>{!1===u&&T.current.isPositioned&&(T.current.isPositioned=!1,f(e=>({...e,isPositioned:!1})))},[u]);const A=r.useRef(!1);Wn(()=>(A.current=!0,()=>{A.current=!1}),[]),Wn(()=>{if(k&&(j.current=k),_&&(S.current=_),k&&_){if(N.current)return N.current(k,_,O);O()}},[k,_,O,N,E]);const R=r.useMemo(()=>({reference:j,floating:S,setReference:w,setFloating:x}),[w,x]),D=r.useMemo(()=>({reference:k,floating:_}),[k,_]),I=r.useMemo(()=>{const e={position:n,left:0,top:0};if(!D.floating)return e;const t=Hn(D.floating,h.x),r=Hn(D.floating,h.y);return l?{...e,transform:"translate("+t+"px, "+r+"px)",...Vn(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,l,D.floating,h.x,h.y]);return r.useMemo(()=>({...h,update:O,refs:R,elements:D,floatingStyles:I}),[h,O,R,D,I])}({strategy:"fixed",placement:A,whileElementsMounted:(...e)=>In(...e,{animationFrame:"always"===w}),elements:{reference:_.anchor},middleware:[Yn({mainAxis:c+O,alignmentAxis:f}),m&&Xn({mainAxis:!0,crossAxis:!1,limiter:"partial"===y?Zn():void 0,...$}),m&&Qn({...$}),es({...$,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{const{width:s,height:o}=t.reference,a=e.floating.style;a.setProperty("--radix-popper-available-width",`${r}px`),a.setProperty("--radix-popper-available-height",`${n}px`),a.setProperty("--radix-popper-anchor-width",`${s}px`),a.setProperty("--radix-popper-anchor-height",`${o}px`)}}),E&&rs({element:E,padding:p}),ks({arrowWidth:P,arrowHeight:O}),b&&ts({strategy:"referenceHidden",...$})]}),[F,q]=_s(B),W=a(x);u(()=>{U&&W?.()},[U,W]);const K=z.arrow?.x,V=z.arrow?.y,H=0!==z.arrow?.centerOffset,[G,J]=r.useState();return u(()=>{j&&J(window.getComputedStyle(j).zIndex)},[j]),e.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:U?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(ms,{scope:o,placedSide:F,onArrowChange:N,arrowX:K,arrowY:V,shouldHideArrow:H,children:e.jsx(n.div,{"data-side":F,"data-align":q,...k,ref:T,style:{...k.style,animation:U?void 0:"none"}})})})});vs.displayName=ps;var ys="PopperArrow",bs={top:"bottom",right:"left",bottom:"top",left:"right"},ws=r.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,o=gs(ys,n),a=bs[o.placedSide];return e.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:e.jsx(ss,{...s,ref:r,style:{...s.style,display:"block"}})})});function xs(e){return null!==e}ws.displayName=ys;var ks=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:s}=t,o=0!==s.arrow?.centerOffset,a=o?0:e.arrowWidth,i=o?0:e.arrowHeight,[l,c]=_s(r),d={start:"0%",center:"50%",end:"100%"}[c],u=(s.arrow?.x??0)+a/2,h=(s.arrow?.y??0)+i/2;let f="",p="";return"bottom"===l?(f=o?d:`${u}px`,p=-i+"px"):"top"===l?(f=o?d:`${u}px`,p=`${n.floating.height+i}px`):"right"===l?(f=-i+"px",p=o?d:`${h}px`):"left"===l&&(f=`${n.floating.width+i}px`,p=o?d:`${h}px`),{data:{x:f,y:p}}}});function _s(e){const[t,r="center"]=e.split("-");return[t,r]}var js=us,Ss=fs,Ts=vs,Es=ws,Ns=r.forwardRef((t,s)=>{const{container:o,...a}=t,[i,l]=r.useState(!1);u(()=>l(!0),[]);const c=o||i&&globalThis?.document?.body;return c?f.createPortal(e.jsx(n.div,{...a,ref:s}),c):null});Ns.displayName="Portal";var Cs=new WeakMap,Ps=new WeakMap,Os={},As=0,Rs=function(e){return e&&(e.host||Rs(e.parentNode))},Ds=function(e,t,r,n){var s=function(e,t){return t.map(function(t){if(e.contains(t))return t;var r=Rs(t);return r&&e.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Os[r]||(Os[r]=new WeakMap);var o=Os[r],a=[],i=new Set,l=new Set(s),c=function(e){e&&!i.has(e)&&(i.add(e),c(e.parentNode))};s.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(i.has(e))d(e);else try{var t=e.getAttribute(n),s=null!==t&&"false"!==t,l=(Cs.get(e)||0)+1,c=(o.get(e)||0)+1;Cs.set(e,l),o.set(e,c),a.push(e),1===l&&s&&Ps.set(e,!0),1===c&&e.setAttribute(r,"true"),s||e.setAttribute(n,"true")}catch(u){console.error("aria-hidden: cannot operate on ",e,u)}})};return d(t),i.clear(),As++,function(){a.forEach(function(e){var t=Cs.get(e)-1,s=o.get(e)-1;Cs.set(e,t),o.set(e,s),t||(Ps.has(e)||e.removeAttribute(n),Ps.delete(e)),s||e.removeAttribute(r)}),--As||(Cs=new WeakMap,Cs=new WeakMap,Ps=new WeakMap,Os={})}},Is=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),Ds(n,s,r,"aria-hidden")):function(){return null}},$s=function(){return $s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},$s.apply(this,arguments)};function Ms(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}"function"==typeof SuppressedError&&SuppressedError;var Ls="right-scroll-bar-position",Bs="width-before-scroll-bar";function Us(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var zs="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,Fs=new WeakMap;function qs(e,t){var n,s,o,a=(n=null,s=function(t){return e.forEach(function(e){return Us(e,t)})},(o=r.useState(function(){return{value:n,callback:s,facade:{get current(){return o.value},set current(e){var t=o.value;t!==e&&(o.value=e,o.callback(e,t))}}}})[0]).callback=s,o.facade);return zs(function(){var t=Fs.get(a);if(t){var r=new Set(t),n=new Set(e),s=a.current;r.forEach(function(e){n.has(e)||Us(e,null)}),n.forEach(function(e){r.has(e)||Us(e,s)})}Fs.set(a,e)},[e]),a}function Ws(e){return e}var Ks=function(e){var t=e.sideCar,n=Ms(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return r.createElement(s,$s({},n))};Ks.isSideCarExport=!0;var Vs=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=Ws);var r=[],n=!1;return{read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(e){var s=t(e,n);return r.push(s),function(){r=r.filter(function(e){return e!==s})}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var s=r;r=[],s.forEach(e),t=r}var o=function(){var r=t;t=[],r.forEach(e)},a=function(){return Promise.resolve().then(o)};a(),r={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),r}}}}}(null);return t.options=$s({async:!0,ssr:!1},e),t}(),Hs=function(){},Gs=r.forwardRef(function(e,t){var n=r.useRef(null),s=r.useState({onScrollCapture:Hs,onWheelCapture:Hs,onTouchMoveCapture:Hs}),o=s[0],a=s[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,p=e.noRelative,m=e.noIsolation,g=e.inert,v=e.allowPinchZoom,y=e.as,b=void 0===y?"div":y,w=e.gapMode,x=Ms(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,_=qs([n,t]),j=$s($s({},x),o);return r.createElement(r.Fragment,null,u&&r.createElement(k,{sideCar:Vs,removeScrollBar:d,shards:h,noRelative:p,noIsolation:m,inert:g,setCallbacks:a,allowPinchZoom:!!v,lockRef:n,gapMode:w}),i?r.cloneElement(r.Children.only(l),$s($s({},j),{ref:_})):r.createElement(b,$s({},j,{className:c,ref:_}),l))});Gs.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Gs.classNames={fullWidth:Bs,zeroRight:Ls};function Js(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var Ys=function(){var e=0,t=null;return{add:function(r){var n,s;0==e&&(t=Js())&&(s=r,(n=t).styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Xs=function(){var e,t=(e=Ys(),function(t,n){r.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var r=e.styles,n=e.dynamic;return t(r,n),null}},Zs={left:0,top:0,right:0,gap:0},Qs=function(e){return parseInt(e||"",10)||0},eo=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return Zs;var t=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],s=t["padding"===e?"paddingRight":"marginRight"];return[Qs(r),Qs(n),Qs(s)]}(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},to=Xs(),ro="data-scroll-locked",no=function(e,t,r,n){var s=e.left,o=e.top,a=e.right,i=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(i,"px ").concat(n,";\n  }\n  body[").concat(ro,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(s,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(i,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(i,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Ls," {\n    right: ").concat(i,"px ").concat(n,";\n  }\n  \n  .").concat(Bs," {\n    margin-right: ").concat(i,"px ").concat(n,";\n  }\n  \n  .").concat(Ls," .").concat(Ls," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(Bs," .").concat(Bs," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(ro,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(i,"px;\n  }\n")},so=function(){var e=parseInt(document.body.getAttribute(ro)||"0",10);return isFinite(e)?e:0},oo=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,o=void 0===s?"margin":s;r.useEffect(function(){return document.body.setAttribute(ro,(so()+1).toString()),function(){var e=so()-1;e<=0?document.body.removeAttribute(ro):document.body.setAttribute(ro,e.toString())}},[]);var a=r.useMemo(function(){return eo(o)},[o]);return r.createElement(to,{styles:no(a,!t,o,n?"":"!important")})},ao=!1;if("undefined"!=typeof window)try{var io=Object.defineProperty({},"passive",{get:function(){return ao=!0,!0}});window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch(ah){ao=!1}var lo=!!ao&&{passive:!1},co=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},uo=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),ho(e,n)){var s=fo(e,n);if(s[1]>s[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},ho=function(e,t){return"v"===e?function(e){return co(e,"overflowY")}(t):function(e){return co(e,"overflowX")}(t)},fo=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var r},po=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},mo=function(e){return[e.deltaX,e.deltaY]},go=function(e){return e&&"current"in e?e.current:e},vo=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},yo=0,bo=[];function wo(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const xo=(ko=function(e){var t=r.useRef([]),n=r.useRef([0,0]),s=r.useRef(),o=r.useState(yo++)[0],a=r.useState(Xs)[0],i=r.useRef(e);r.useEffect(function(){i.current=e},[e]),r.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var t=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,o=t.length;s<o;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(go),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var l=r.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var r,o=po(e),a=n.current,l="deltaX"in e?e.deltaX:a[0]-o[0],c="deltaY"in e?e.deltaY:a[1]-o[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=uo(u,d);if(!h)return!0;if(h?r=u:(r="v"===u?"h":"v",h=uo(u,d)),!h)return!1;if(!s.current&&"changedTouches"in e&&(l||c)&&(s.current=r),!r)return!0;var f=s.current||r;return function(e,t,r,n){var s=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),o=s*n,a=r.target,i=t.contains(a),l=!1,c=o>0,d=0,u=0;do{if(!a)break;var h=fo(e,a),f=h[0],p=h[1]-h[2]-s*f;(f||p)&&ho(e,a)&&(d+=p,u+=f);var m=a.parentNode;a=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!i&&a!==document.body||i&&(t.contains(a)||t===a));return(c&&Math.abs(d)<1||!c&&Math.abs(u)<1)&&(l=!0),l}(f,t,e,"h"===f?l:c)},[]),c=r.useCallback(function(e){var r=e;if(bo.length&&bo[bo.length-1]===a){var n="deltaY"in r?mo(r):po(r),s=t.current.filter(function(e){return e.name===r.type&&(e.target===r.target||r.target===e.shadowParent)&&(t=e.delta,s=n,t[0]===s[0]&&t[1]===s[1]);var t,s})[0];if(s&&s.should)r.cancelable&&r.preventDefault();else if(!s){var o=(i.current.shards||[]).map(go).filter(Boolean).filter(function(e){return e.contains(r.target)});(o.length>0?l(r,o[0]):!i.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),d=r.useCallback(function(e,r,n,s){var o={name:e,delta:r,target:n,should:s,shadowParent:wo(n)};t.current.push(o),setTimeout(function(){t.current=t.current.filter(function(e){return e!==o})},1)},[]),u=r.useCallback(function(e){n.current=po(e),s.current=void 0},[]),h=r.useCallback(function(t){d(t.type,mo(t),t.target,l(t,e.lockRef.current))},[]),f=r.useCallback(function(t){d(t.type,po(t),t.target,l(t,e.lockRef.current))},[]);r.useEffect(function(){return bo.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,lo),document.addEventListener("touchmove",c,lo),document.addEventListener("touchstart",u,lo),function(){bo=bo.filter(function(e){return e!==a}),document.removeEventListener("wheel",c,lo),document.removeEventListener("touchmove",c,lo),document.removeEventListener("touchstart",u,lo)}},[]);var p=e.removeScrollBar,m=e.inert;return r.createElement(r.Fragment,null,m?r.createElement(a,{styles:vo(o)}):null,p?r.createElement(oo,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},Vs.useMedium(ko),Ks);var ko,_o=r.forwardRef(function(e,t){return r.createElement(Gs,$s({},e,{ref:t,sideCar:xo}))});_o.classNames=Gs.classNames;var jo=["Enter"," "],So=["ArrowUp","PageDown","End"],To=["ArrowDown","PageUp","Home",...So],Eo={ltr:[...jo,"ArrowRight"],rtl:[...jo,"ArrowLeft"]},No={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Co="Menu",[Po,Oo,Ao]=p(Co),[Ro,Do]=h(Co,[Ao,ls,m]),Io=ls(),$o=m(),[Mo,Lo]=Ro(Co),[Bo,Uo]=Ro(Co),zo=t=>{const{__scopeMenu:n,open:s=!1,children:o,dir:i,onOpenChange:l,modal:c=!0}=t,d=Io(n),[u,h]=r.useState(null),f=r.useRef(!1),p=a(l),m=g(i);return r.useEffect(()=>{const e=()=>{f.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>f.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),e.jsx(js,{...d,children:e.jsx(Mo,{scope:n,open:s,onOpenChange:p,content:u,onContentChange:h,children:e.jsx(Bo,{scope:n,onClose:r.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:f,dir:m,modal:c,children:o})})})};zo.displayName=Co;var Fo=r.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t,o=Io(n);return e.jsx(Ss,{...o,...s,ref:r})});Fo.displayName="MenuAnchor";var qo="MenuPortal",[Wo,Ko]=Ro(qo,{forceMount:void 0}),Vo=t=>{const{__scopeMenu:r,forceMount:n,children:s,container:o}=t,a=Lo(qo,r);return e.jsx(Wo,{scope:r,forceMount:n,children:e.jsx(v,{present:n||a.open,children:e.jsx(Ns,{asChild:!0,container:o,children:s})})})};Vo.displayName=qo;var Ho="MenuContent",[Go,Jo]=Ro(Ho),Yo=r.forwardRef((t,r)=>{const n=Ko(Ho,t.__scopeMenu),{forceMount:s=n.forceMount,...o}=t,a=Lo(Ho,t.__scopeMenu),i=Uo(Ho,t.__scopeMenu);return e.jsx(Po.Provider,{scope:t.__scopeMenu,children:e.jsx(v,{present:s||a.open,children:e.jsx(Po.Slot,{scope:t.__scopeMenu,children:i.modal?e.jsx(Xo,{...o,ref:r}):e.jsx(Zo,{...o,ref:r})})})})}),Xo=r.forwardRef((t,n)=>{const s=Lo(Ho,t.__scopeMenu),o=r.useRef(null),a=i(n,o);return r.useEffect(()=>{const e=o.current;if(e)return Is(e)},[]),e.jsx(ea,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:l(t.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),Zo=r.forwardRef((t,r)=>{const n=Lo(Ho,t.__scopeMenu);return e.jsx(ea,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Qo=b("MenuContent.ScrollLock"),ea=r.forwardRef((t,n)=>{const{__scopeMenu:s,loop:o=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:u,onEntryFocus:h,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:g,onDismiss:v,disableOutsideScroll:y,...b}=t,x=Lo(Ho,s),k=Uo(Ho,s),_=Io(s),j=$o(s),S=Oo(s),[T,E]=r.useState(null),N=r.useRef(null),C=i(n,N,x.onContentChange),P=r.useRef(0),O=r.useRef(""),A=r.useRef(0),R=r.useRef(null),D=r.useRef("right"),I=r.useRef(0),$=y?_o:r.Fragment,M=y?{as:Qo,allowPinchZoom:!0}:void 0,L=e=>{const t=O.current+e,r=S().filter(e=>!e.disabled),n=document.activeElement,s=r.find(e=>e.ref.current===n)?.textValue,o=function(e,t,r){const n=t.length>1&&Array.from(t).every(e=>e===t[0]),s=n?t[0]:t,o=r?e.indexOf(r):-1;let a=(i=e,l=Math.max(o,0),i.map((e,t)=>i[(l+t)%i.length]));var i,l;1===s.length&&(a=a.filter(e=>e!==r));const c=a.find(e=>e.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}(r.map(e=>e.textValue),t,s),a=r.find(e=>e.textValue===o)?.ref.current;!function e(t){O.current=t,window.clearTimeout(P.current),""!==t&&(P.current=window.setTimeout(()=>e(""),1e3))}(t),a&&setTimeout(()=>a.focus())};r.useEffect(()=>()=>window.clearTimeout(P.current),[]),r.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??rr()),document.body.insertAdjacentElement("beforeend",e[1]??rr()),tr++,()=>{1===tr&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),tr--}},[]);const B=r.useCallback(e=>D.current===R.current?.side&&function(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return function(e,t){const{x:r,y:n}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const e=t[o],i=t[a],l=e.x,c=e.y,d=i.x,u=i.y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(s=!s)}return s}(r,t)}(e,R.current?.area),[]);return e.jsx(Go,{scope:s,searchRef:O,onItemEnter:r.useCallback(e=>{B(e)&&e.preventDefault()},[B]),onItemLeave:r.useCallback(e=>{B(e)||(N.current?.focus(),E(null))},[B]),onTriggerLeave:r.useCallback(e=>{B(e)&&e.preventDefault()},[B]),pointerGraceTimerRef:A,onPointerGraceIntentChange:r.useCallback(e=>{R.current=e},[]),children:e.jsx($,{...M,children:e.jsx(ar,{asChild:!0,trapped:a,onMountAutoFocus:l(c,e=>{e.preventDefault(),N.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:e.jsx(Zt,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:m,onInteractOutside:g,onDismiss:v,children:e.jsx(w,{asChild:!0,...j,dir:k.dir,orientation:"vertical",loop:o,currentTabStopId:T,onCurrentTabStopIdChange:E,onEntryFocus:l(h,e=>{k.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Ts,{role:"menu","aria-orientation":"vertical","data-state":Ta(x.open),"data-radix-menu-content":"",dir:k.dir,..._,...b,ref:C,style:{outline:"none",...b.style},onKeyDown:l(b.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!r&&n&&L(e.key));const s=N.current;if(e.target!==s)return;if(!To.includes(e.key))return;e.preventDefault();const o=S().filter(e=>!e.disabled).map(e=>e.ref.current);So.includes(e.key)&&o.reverse(),function(e){const t=document.activeElement;for(const r of e){if(r===t)return;if(r.focus(),document.activeElement!==t)return}}(o)}),onBlur:l(t.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(P.current),O.current="")}),onPointerMove:l(t.onPointerMove,Ca(e=>{const t=e.target,r=I.current!==e.clientX;if(e.currentTarget.contains(t)&&r){const t=e.clientX>I.current?"right":"left";D.current=t,I.current=e.clientX}}))})})})})})})});Yo.displayName=Ho;var ta=r.forwardRef((t,r)=>{const{__scopeMenu:s,...o}=t;return e.jsx(n.div,{role:"group",...o,ref:r})});ta.displayName="MenuGroup";var ra=r.forwardRef((t,r)=>{const{__scopeMenu:s,...o}=t;return e.jsx(n.div,{...o,ref:r})});ra.displayName="MenuLabel";var na="MenuItem",sa="menu.itemSelect",oa=r.forwardRef((t,n)=>{const{disabled:s=!1,onSelect:o,...a}=t,d=r.useRef(null),u=Uo(na,t.__scopeMenu),h=Jo(na,t.__scopeMenu),f=i(n,d),p=r.useRef(!1);return e.jsx(aa,{...a,ref:f,disabled:s,onClick:l(t.onClick,()=>{const e=d.current;if(!s&&e){const t=new CustomEvent(sa,{bubbles:!0,cancelable:!0});e.addEventListener(sa,e=>o?.(e),{once:!0}),c(e,t),t.defaultPrevented?p.current=!1:u.onClose()}}),onPointerDown:e=>{t.onPointerDown?.(e),p.current=!0},onPointerUp:l(t.onPointerUp,e=>{p.current||e.currentTarget?.click()}),onKeyDown:l(t.onKeyDown,e=>{const t=""!==h.searchRef.current;s||t&&" "===e.key||jo.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});oa.displayName=na;var aa=r.forwardRef((t,s)=>{const{__scopeMenu:o,disabled:a=!1,textValue:c,...d}=t,u=Jo(na,o),h=$o(o),f=r.useRef(null),p=i(s,f),[m,g]=r.useState(!1),[v,b]=r.useState("");return r.useEffect(()=>{const e=f.current;e&&b((e.textContent??"").trim())},[d.children]),e.jsx(Po.ItemSlot,{scope:o,disabled:a,textValue:c??v,children:e.jsx(y,{asChild:!0,...h,focusable:!a,children:e.jsx(n.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...d,ref:p,onPointerMove:l(t.onPointerMove,Ca(e=>{if(a)u.onItemLeave(e);else if(u.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:l(t.onPointerLeave,Ca(e=>u.onItemLeave(e))),onFocus:l(t.onFocus,()=>g(!0)),onBlur:l(t.onBlur,()=>g(!1))})})})}),ia=r.forwardRef((t,r)=>{const{checked:n=!1,onCheckedChange:s,...o}=t;return e.jsx(ma,{scope:t.__scopeMenu,checked:n,children:e.jsx(oa,{role:"menuitemcheckbox","aria-checked":Ea(n)?"mixed":n,...o,ref:r,"data-state":Na(n),onSelect:l(o.onSelect,()=>s?.(!!Ea(n)||!n),{checkForDefaultPrevented:!1})})})});ia.displayName="MenuCheckboxItem";var la="MenuRadioGroup",[ca,da]=Ro(la,{value:void 0,onValueChange:()=>{}}),ua=r.forwardRef((t,r)=>{const{value:n,onValueChange:s,...o}=t,i=a(s);return e.jsx(ca,{scope:t.__scopeMenu,value:n,onValueChange:i,children:e.jsx(ta,{...o,ref:r})})});ua.displayName=la;var ha="MenuRadioItem",fa=r.forwardRef((t,r)=>{const{value:n,...s}=t,o=da(ha,t.__scopeMenu),a=n===o.value;return e.jsx(ma,{scope:t.__scopeMenu,checked:a,children:e.jsx(oa,{role:"menuitemradio","aria-checked":a,...s,ref:r,"data-state":Na(a),onSelect:l(s.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});fa.displayName=ha;var pa="MenuItemIndicator",[ma,ga]=Ro(pa,{checked:!1}),va=r.forwardRef((t,r)=>{const{__scopeMenu:s,forceMount:o,...a}=t,i=ga(pa,s);return e.jsx(v,{present:o||Ea(i.checked)||!0===i.checked,children:e.jsx(n.span,{...a,ref:r,"data-state":Na(i.checked)})})});va.displayName=pa;var ya=r.forwardRef((t,r)=>{const{__scopeMenu:s,...o}=t;return e.jsx(n.div,{role:"separator","aria-orientation":"horizontal",...o,ref:r})});ya.displayName="MenuSeparator";var ba=r.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t,o=Io(n);return e.jsx(Es,{...o,...s,ref:r})});ba.displayName="MenuArrow";var[wa,xa]=Ro("MenuSub"),ka="MenuSubTrigger",_a=r.forwardRef((t,n)=>{const s=Lo(ka,t.__scopeMenu),o=Uo(ka,t.__scopeMenu),a=xa(ka,t.__scopeMenu),i=Jo(ka,t.__scopeMenu),c=r.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:u}=i,h={__scopeMenu:t.__scopeMenu},f=r.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return r.useEffect(()=>f,[f]),r.useEffect(()=>{const e=d.current;return()=>{window.clearTimeout(e),u(null)}},[d,u]),e.jsx(Fo,{asChild:!0,...h,children:e.jsx(aa,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":a.contentId,"data-state":Ta(s.open),...t,ref:x(n,a.onTriggerChange),onClick:e=>{t.onClick?.(e),t.disabled||e.defaultPrevented||(e.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:l(t.onPointerMove,Ca(e=>{i.onItemEnter(e),e.defaultPrevented||t.disabled||s.open||c.current||(i.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{s.onOpenChange(!0),f()},100))})),onPointerLeave:l(t.onPointerLeave,Ca(e=>{f();const t=s.content?.getBoundingClientRect();if(t){const r=s.content?.dataset.side,n="right"===r,o=n?-5:5,a=t[n?"left":"right"],l=t[n?"right":"left"];i.onPointerGraceIntentChange({area:[{x:e.clientX+o,y:e.clientY},{x:a,y:t.top},{x:l,y:t.top},{x:l,y:t.bottom},{x:a,y:t.bottom}],side:r}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(e),e.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:l(t.onKeyDown,e=>{const r=""!==i.searchRef.current;t.disabled||r&&" "===e.key||Eo[o.dir].includes(e.key)&&(s.onOpenChange(!0),s.content?.focus(),e.preventDefault())})})})});_a.displayName=ka;var ja="MenuSubContent",Sa=r.forwardRef((t,n)=>{const s=Ko(Ho,t.__scopeMenu),{forceMount:o=s.forceMount,...a}=t,c=Lo(Ho,t.__scopeMenu),d=Uo(Ho,t.__scopeMenu),u=xa(ja,t.__scopeMenu),h=r.useRef(null),f=i(n,h);return e.jsx(Po.Provider,{scope:t.__scopeMenu,children:e.jsx(v,{present:o||c.open,children:e.jsx(Po.Slot,{scope:t.__scopeMenu,children:e.jsx(ea,{id:u.contentId,"aria-labelledby":u.triggerId,...a,ref:f,align:"start",side:"rtl"===d.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{d.isUsingKeyboardRef.current&&h.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:l(t.onFocusOutside,e=>{e.target!==u.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:l(t.onEscapeKeyDown,e=>{d.onClose(),e.preventDefault()}),onKeyDown:l(t.onKeyDown,e=>{const t=e.currentTarget.contains(e.target),r=No[d.dir].includes(e.key);t&&r&&(c.onOpenChange(!1),u.trigger?.focus(),e.preventDefault())})})})})})});function Ta(e){return e?"open":"closed"}function Ea(e){return"indeterminate"===e}function Na(e){return Ea(e)?"indeterminate":e?"checked":"unchecked"}function Ca(e){return t=>"mouse"===t.pointerType?e(t):void 0}Sa.displayName=ja;var Pa=zo,Oa=Fo,Aa=Vo,Ra=Yo,Da=ta,Ia=ra,$a=oa,Ma=ia,La=ua,Ba=fa,Ua=va,za=ya,Fa=ba,qa=_a,Wa=Sa,Ka="DropdownMenu",[Va]=h(Ka,[Do]),Ha=Do(),[Ga,Ja]=Va(Ka),Ya=t=>{const{__scopeDropdownMenu:n,children:s,dir:o,open:a,defaultOpen:i,onOpenChange:l,modal:c=!0}=t,d=Ha(n),u=r.useRef(null),[h,f]=k({prop:a,defaultProp:i??!1,onChange:l,caller:Ka});return e.jsx(Ga,{scope:n,triggerId:_(),triggerRef:u,contentId:_(),open:h,onOpenChange:f,onOpenToggle:r.useCallback(()=>f(e=>!e),[f]),modal:c,children:e.jsx(Pa,{...d,open:h,onOpenChange:f,dir:o,modal:c,children:s})})};Ya.displayName=Ka;var Xa="DropdownMenuTrigger",Za=r.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,disabled:o=!1,...a}=t,i=Ja(Xa,s),c=Ha(s);return e.jsx(Oa,{asChild:!0,...c,children:e.jsx(n.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...a,ref:x(r,i.triggerRef),onPointerDown:l(t.onPointerDown,e=>{o||0!==e.button||!1!==e.ctrlKey||(i.onOpenToggle(),i.open||e.preventDefault())}),onKeyDown:l(t.onKeyDown,e=>{o||(["Enter"," "].includes(e.key)&&i.onOpenToggle(),"ArrowDown"===e.key&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});Za.displayName=Xa;var Qa=t=>{const{__scopeDropdownMenu:r,...n}=t,s=Ha(r);return e.jsx(Aa,{...s,...n})};Qa.displayName="DropdownMenuPortal";var ei="DropdownMenuContent",ti=r.forwardRef((t,n)=>{const{__scopeDropdownMenu:s,...o}=t,a=Ja(ei,s),i=Ha(s),c=r.useRef(!1);return e.jsx(Ra,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...o,ref:n,onCloseAutoFocus:l(t.onCloseAutoFocus,e=>{c.current||a.triggerRef.current?.focus(),c.current=!1,e.preventDefault()}),onInteractOutside:l(t.onInteractOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;a.modal&&!n||(c.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ti.displayName=ei;r.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,o=Ha(n);return e.jsx(Da,{...o,...s,ref:r})}).displayName="DropdownMenuGroup";r.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,o=Ha(n);return e.jsx(Ia,{...o,...s,ref:r})}).displayName="DropdownMenuLabel";var ri=r.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,o=Ha(n);return e.jsx($a,{...o,...s,ref:r})});ri.displayName="DropdownMenuItem";r.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,o=Ha(n);return e.jsx(Ma,{...o,...s,ref:r})}).displayName="DropdownMenuCheckboxItem";r.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,o=Ha(n);return e.jsx(La,{...o,...s,ref:r})}).displayName="DropdownMenuRadioGroup";r.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,o=Ha(n);return e.jsx(Ba,{...o,...s,ref:r})}).displayName="DropdownMenuRadioItem";r.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,o=Ha(n);return e.jsx(Ua,{...o,...s,ref:r})}).displayName="DropdownMenuItemIndicator";r.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,o=Ha(n);return e.jsx(za,{...o,...s,ref:r})}).displayName="DropdownMenuSeparator";r.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,o=Ha(n);return e.jsx(Fa,{...o,...s,ref:r})}).displayName="DropdownMenuArrow";r.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,o=Ha(n);return e.jsx(qa,{...o,...s,ref:r})}).displayName="DropdownMenuSubTrigger";r.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,o=Ha(n);return e.jsx(Wa,{...o,...s,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="DropdownMenuSubContent";var ni=Ya,si=Za,oi=Qa,ai=ti,ii=ri;function li({...t}){return e.jsx(ni,{"data-slot":"dropdown-menu",...t})}function ci({...t}){return e.jsx(si,{"data-slot":"dropdown-menu-trigger",...t})}function di({className:t,sideOffset:r=4,...n}){return e.jsx(oi,{children:e.jsx(ai,{"data-slot":"dropdown-menu-content",sideOffset:r,className:et("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function ui({className:t,inset:r,variant:n="default",...s}){return e.jsx(ii,{"data-slot":"dropdown-menu-item","data-inset":r,"data-variant":n,className:et("data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}const hi=["編程開發","文檔撰寫","會議討論","學習研究","設計創作","測試除錯","郵件處理","專案規劃","代碼審查","休息放鬆"];function fi({settings:t,onSessionComplete:n,onUpdateSettings:s,sessions:o}){const[a,i]=r.useState(t.lastSelectedTask||t.defaultTaskName||""),[l,c]=r.useState(Math.round(60*t.workDuration)),[d,u]=r.useState(!1),[h,f]=r.useState("work"),[p,m]=r.useState(0),[g,v]=r.useState(0),[y,b]=r.useState(0),[w,x]=r.useState([]),[k,_]=r.useState(!1),j=r.useRef(),S=r.useRef(),T=r.useRef(!1),E=r.useMemo(()=>{const e=new Set(t.customTaskList||[]),r=new Set(hi);return w.filter(t=>!e.has(t)&&!r.has(t))},[w,t.customTaskList]);r.useEffect(()=>{"Notification"in window&&Notification.requestPermission().then(e=>{T.current="granted"===e});const e=localStorage.getItem("recentTasks");e&&x(JSON.parse(e))},[]);r.useEffect(()=>{d||(c(Math.round(60*t.workDuration)),f("work"))},[t,d]),r.useEffect(()=>{const e=(new Date).toISOString().split("T")[0],t=o.filter(t=>t.date===e&&"work"===t.type).length;v(t)},[o]);const N=()=>{switch(h){case"work":return Math.round(60*t.workDuration);case"shortBreak":return Math.round(60*t.shortBreakDuration);case"longBreak":return Math.round(60*t.longBreakDuration)}},C=()=>{switch(h){case"work":return"工作時間";case"shortBreak":return"短休息";case"longBreak":return"長休息"}},P=(e,t)=>{T.current&&new Notification(e,{body:t,icon:"🍅"})},O=()=>{S.current&&clearInterval(S.current),b(0)},A=()=>{const e=new Date,r={taskName:"work"===h?a:`${C()}`,duration:N()/60,type:"work"===h?"work":"longBreak"===h?"longBreak":"break",completedAt:e,date:e.toISOString().split("T")[0]};var s;if(n(r),(async()=>{if(t.soundEnabled)try{const e=new(window.AudioContext||window.webkitAudioContext);"suspended"===e.state&&await e.resume();const r=e.createOscillator(),n=e.createGain();r.connect(n),n.connect(e.destination);const s=t.soundType||"bell",o=t.soundVolume||.5;switch(s){case"bell":r.frequency.setValueAtTime(800,e.currentTime),r.frequency.exponentialRampToValueAtTime(400,e.currentTime+.3),r.type="sine";break;case"chime":r.frequency.setValueAtTime(1200,e.currentTime),r.frequency.linearRampToValueAtTime(900,e.currentTime+.4),r.type="sine";break;case"digital":r.frequency.setValueAtTime(600,e.currentTime),r.type="square";break;case"soft":r.frequency.setValueAtTime(440,e.currentTime),r.type="sine"}n.gain.setValueAtTime(o,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.6),r.start(e.currentTime),r.stop(e.currentTime+.6),setTimeout(()=>{try{e.close()}catch(t){}},700)}catch(e){console.warn("無法播放提示音效:",e)}})(),"work"===h&&a&&(s=a).trim()&&x(e=>{const t=e.filter(e=>e!==s),r=[s,...t].slice(0,10);return localStorage.setItem("recentTasks",JSON.stringify(r)),r}),"work"===h){P("工作時間結束！","休息一下吧 ☕");const e=p+1;m(e);const r=e%t.pomodorosUntilLongBreak===0?"longBreak":"shortBreak";f(r),c(Math.round("longBreak"===r?60*t.longBreakDuration:60*t.shortBreakDuration)),u(!0)}else P("休息時間結束！","準備開始下一個番茄鐘 🍅"),f("work"),c(Math.round(60*t.workDuration))};r.useEffect(()=>(d&&l>0?j.current=setInterval(()=>{c(e=>e<=1?0:e-1)},1e3):j.current&&clearInterval(j.current),()=>{j.current&&clearInterval(j.current)}),[d,l]),r.useEffect(()=>{0===l&&d&&(u(!1),setTimeout(()=>{A()},0))},[l,d,h,p,a,t]);const R=e=>{const r={...t,lastSelectedTask:e};s(r)},D=(N()-l)/N()*100;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(tt,{className:"transition-all duration-300 "+(l<=10&&d?"ring-2 ring-red-400 shadow-lg shadow-red-100":""),children:[e.jsx(rt,{className:"text-center",children:e.jsxs(nt,{className:"flex items-center justify-center gap-2 transition-colors duration-300 "+(l<=10&&d?"text-red-500":""),children:[(()=>{switch(h){case"work":return e.jsx(Ut,{className:"w-5 h-5"});case"shortBreak":case"longBreak":return e.jsx(Et,{className:"w-5 h-5"})}})(),C()]})}),e.jsxs(ot,{className:"space-y-6",children:["work"===h&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(pt,{htmlFor:"task-name",children:"任務名稱"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ut,{id:"task-name",value:a,onChange:e=>{i(e.target.value),_(!0),e.target.value.trim()&&R(e.target.value.trim())},onFocus:()=>_(!0),onBlur:()=>setTimeout(()=>_(!1),200),placeholder:d?"計時進行中，任務已鎖定":`輸入你要專注的任務... (預設: ${t.defaultTaskName||"專注工作"})`,disabled:d||y>0,autoComplete:"off",className:d?"bg-gray-50 cursor-not-allowed":""}),k&&a&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto",children:w.filter(e=>e.toLowerCase().includes(a.toLowerCase())).slice(0,5).map((t,r)=>e.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{i(t),_(!1),R(t)},children:t},r))})]}),e.jsxs(li,{children:[e.jsx(ci,{disabled:d||y>0,className:"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2",children:e.jsx(jt,{className:"h-4 w-4"})}),e.jsxs(di,{className:"w-96 max-h-[70vh] overflow-y-auto p-4 shadow-2xl !border-[3px] !border-solid !border-gray-500 dark:!border-gray-500 bg-white dark:bg-gray-950 z-[100] rounded-2xl",sideOffset:12,align:"start",style:{backgroundColor:"white",border:"3px solid rgb(107, 114, 128)"},children:[t.customTaskList&&t.customTaskList.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2.5 px-3 py-2 mb-3 bg-gradient-to-br from-blue-600 via-blue-500 to-indigo-600 rounded-2xl shadow-lg",children:[e.jsx("span",{className:"text-2xl filter drop-shadow-sm",children:"⭐"}),e.jsx("span",{className:"text-base font-extrabold !text-white tracking-wide drop-shadow-sm",children:"自定義任務列表"})]}),e.jsx("div",{className:"space-y-2",children:t.customTaskList.map((t,r)=>e.jsxs(ui,{onClick:()=>{i(t),R(t)},className:"group relative cursor-pointer px-5 py-4 rounded-2xl font-bold text-base text-blue-700 dark:text-blue-300 bg-gradient-to-br from-blue-50 via-blue-100/80 to-indigo-50 dark:from-blue-950/50 dark:via-blue-900/40 dark:to-indigo-950/50 hover:from-blue-100 hover:via-blue-200 hover:to-indigo-100 dark:hover:from-blue-900/70 dark:hover:via-blue-800/60 dark:hover:to-indigo-900/70 data-[highlighted]:from-blue-100 data-[highlighted]:via-blue-200 data-[highlighted]:to-indigo-100 dark:data-[highlighted]:from-blue-900/70 dark:data-[highlighted]:via-blue-800/60 dark:data-[highlighted]:to-indigo-900/70 transition-all duration-300 border-2 border-blue-200 dark:border-blue-800/60 hover:border-blue-400 dark:hover:border-blue-600 data-[highlighted]:border-blue-400 dark:data-[highlighted]:border-blue-600 hover:shadow-2xl hover:shadow-blue-200/50 dark:hover:shadow-blue-900/50 data-[highlighted]:shadow-2xl data-[highlighted]:shadow-blue-200/50 dark:data-[highlighted]:shadow-blue-900/50 hover:-translate-y-1 data-[highlighted]:-translate-y-1 active:translate-y-0 active:shadow-lg overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("span",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("span",{className:"flex-shrink-0 w-3 h-3 rounded-full bg-blue-500 shadow-lg shadow-blue-500/50 group-hover:scale-150 group-hover:shadow-xl transition-all duration-300"}),e.jsx("span",{className:"flex-1 group-hover:translate-x-1 transition-transform duration-300",children:t}),e.jsx("span",{className:"text-xs text-blue-500/60 dark:text-blue-400/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"→"})]})]},`custom-${r}`))}),e.jsx("div",{className:"my-5 h-px bg-gradient-to-r from-transparent via-blue-300 dark:via-blue-800 to-transparent"})]}),E.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2.5 px-3 py-2 mb-3 bg-gradient-to-br from-gray-200 via-gray-100 to-gray-200 dark:from-gray-800 dark:via-gray-700 dark:to-gray-800 rounded-xl shadow-md",children:[e.jsx("span",{className:"text-xl",children:"🕐"}),e.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"最近使用"})]}),e.jsx("div",{className:"space-y-1.5",children:E.slice(0,5).map((t,r)=>e.jsx(ui,{onClick:()=>{i(t),R(t)},className:"group cursor-pointer px-5 py-3.5 rounded-xl font-semibold text-sm text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-900/50 hover:bg-gradient-to-r hover:from-gray-100 hover:to-gray-200 dark:hover:from-gray-800 dark:hover:to-gray-700 data-[highlighted]:bg-gradient-to-r data-[highlighted]:from-gray-100 data-[highlighted]:to-gray-200 dark:data-[highlighted]:from-gray-800 dark:data-[highlighted]:to-gray-700 transition-all duration-200 border border-gray-200 dark:border-gray-800 hover:border-gray-400 dark:hover:border-gray-600 data-[highlighted]:border-gray-400 dark:data-[highlighted]:border-gray-600 hover:shadow-lg data-[highlighted]:shadow-lg hover:-translate-y-0.5 data-[highlighted]:-translate-y-0.5 active:translate-y-0",children:e.jsxs("span",{className:"flex items-center gap-3.5",children:[e.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-gray-400 dark:bg-gray-500 group-hover:scale-150 group-hover:bg-gray-600 dark:group-hover:bg-gray-300 transition-all duration-200 shadow-sm"}),e.jsx("span",{className:"flex-1 group-hover:translate-x-0.5 transition-transform duration-200",children:t}),e.jsx("span",{className:"text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"→"})]})},`recent-${r}`))}),e.jsx("div",{className:"my-5 h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-700 to-transparent"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2.5 px-3 py-2 mb-3 bg-gray-100 dark:bg-gray-900/50 rounded-xl",children:[e.jsx("span",{className:"text-xl",children:"📋"}),e.jsx("span",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"推薦任務類型"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:hi.map(t=>e.jsx(ui,{onClick:()=>{i(t),R(t)},className:"group cursor-pointer px-4 py-3 rounded-xl text-sm font-medium text-center text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/30 hover:text-gray-900 dark:hover:text-gray-100 data-[highlighted]:text-gray-900 dark:data-[highlighted]:text-gray-100 hover:bg-gradient-to-br hover:from-gray-100 hover:to-gray-200 dark:hover:from-gray-800/80 dark:hover:to-gray-700/80 data-[highlighted]:bg-gradient-to-br data-[highlighted]:from-gray-100 data-[highlighted]:to-gray-200 dark:data-[highlighted]:from-gray-800/80 dark:data-[highlighted]:to-gray-700/80 transition-all duration-200 border border-gray-200 dark:border-gray-800 hover:border-gray-400 dark:hover:border-gray-600 data-[highlighted]:border-gray-400 dark:data-[highlighted]:border-gray-600 hover:shadow-md data-[highlighted]:shadow-md hover:scale-105 data-[highlighted]:scale-105 active:scale-100",children:e.jsx("span",{className:"block truncate",children:t})},`default-${t}`))})]})]})]})]})]}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"text-6xl font-mono transition-all duration-300 "+(l<=10&&d?"text-red-500 animate-pulse scale-110":""),children:(e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`})(l)}),e.jsx(mt,{value:D,className:"w-full transition-all duration-300 "+(l<=10&&d?"border-red-500":"")}),y>0&&e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-semibold text-yellow-800",children:"work"===h?"準備開始下一個番茄鐘":"準備開始休息"}),e.jsx("div",{className:"text-3xl font-mono text-yellow-600 my-2",children:y}),e.jsx(dt,{onClick:O,variant:"outline",size:"sm",children:"取消自動開始"})]})}),e.jsxs("div",{className:"flex justify-center gap-4",children:[d||0!==y?d?e.jsxs(dt,{onClick:()=>{u(!1)},variant:"secondary",size:"lg",className:"px-8",children:[e.jsx(At,{className:"w-5 h-5 mr-2"}),"暫停"]}):null:e.jsxs(dt,{onClick:()=>{"work"!==h||a.trim()||i(t.defaultTaskName||"專注工作"),u(!0)},size:"lg",className:"px-8",children:[e.jsx(Rt,{className:"w-5 h-5 mr-2"}),"開始"]}),"work"!==h&&e.jsxs(dt,{onClick:()=>{u(!1),O();const e=new Date,r={taskName:C(),duration:(N()-l)/60,type:"longBreak"===h?"longBreak":"break",completedAt:e,date:e.toISOString().split("T")[0]};n(r),P("休息結束！","開始新的工作時段 🍅"),f("work"),c(Math.round(60*t.workDuration))},variant:"default",size:"lg",children:[e.jsx(Bt,{className:"w-5 h-5 mr-2"}),"結束休息"]}),e.jsxs(dt,{onClick:()=>{u(!1),f("work"),c(Math.round(60*t.workDuration)),m(0),i(t.lastSelectedTask||t.defaultTaskName||""),O()},variant:"outline",size:"lg",children:[e.jsx(It,{className:"w-5 h-5 mr-2"}),"重置"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(tt,{children:e.jsxs(ot,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-mono",children:p}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"本輪番茄鐘"}),e.jsx("div",{className:"mt-2",children:e.jsx(mt,{value:p%t.pomodorosUntilLongBreak/t.pomodorosUntilLongBreak*100,className:"h-2"})})]})}),e.jsx(tt,{children:e.jsxs(ot,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-mono",children:g}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"今日完成"}),e.jsxs("div",{className:"mt-2 flex justify-center gap-1",children:[Array.from({length:Math.min(g,8)},(t,r)=>e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"},r)),g>8&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["+",g-8]})]})]})}),e.jsx(tt,{children:e.jsxs(ot,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-mono",children:t.pomodorosUntilLongBreak-p%t.pomodorosUntilLongBreak}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"距離長休息"}),e.jsx("div",{className:"mt-2 flex justify-center gap-1",children:Array.from({length:t.pomodorosUntilLongBreak},(r,n)=>e.jsx("div",{className:"w-3 h-3 rounded-full "+(n<p%t.pomodorosUntilLongBreak?"bg-primary":"bg-gray-300")},n))})]})})]})]})}function pi({className:t,...r}){return e.jsx(j,{"data-slot":"tabs",className:et("flex flex-col gap-2",t),...r})}function mi({className:t,...r}){return e.jsx(S,{"data-slot":"tabs-list",className:et("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...r})}function gi({className:t,...r}){return e.jsx(T,{"data-slot":"tabs-trigger",className:et("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function vi({className:t,...r}){return e.jsx(E,{"data-slot":"tabs-content",className:et("flex-1 outline-none",t),...r})}const yi=lt("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function bi({className:r,variant:n,asChild:s=!1,...o}){const a=s?t:"span";return e.jsx(a,{"data-slot":"badge",className:et(yi({variant:n}),r),...o})}Array(12).fill(0);let wi=1;const xi=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...n}=e,s="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:wi++,o=this.toasts.find(e=>e.id===s),a=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(t=>t.id===s?(this.publish({...t,...e,id:s,title:r}),{...t,...e,id:s,dismissible:a,title:r}):t):this.addToast({title:r,...n,dismissible:a,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;void 0!==t.loading&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const n=Promise.resolve(e instanceof Function?e():e);let s,o=void 0!==r;const a=n.then(async e=>{s=["resolve",e];if(N.isValidElement(e))o=!1,this.create({id:r,type:"default",message:e});else if(ki(e)&&!e.ok){o=!1;const n="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,s="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,a="object"==typeof n&&!N.isValidElement(n)?n:{message:n};this.create({id:r,type:"error",description:s,...a})}else if(e instanceof Error){o=!1;const n="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof n&&!N.isValidElement(n)?n:{message:n};this.create({id:r,type:"error",description:s,...a})}else if(void 0!==t.success){o=!1;const n="function"==typeof t.success?await t.success(e):t.success,s="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof n&&!N.isValidElement(n)?n:{message:n};this.create({id:r,type:"success",description:s,...a})}}).catch(async e=>{if(s=["reject",e],void 0!==t.error){o=!1;const n="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof n&&!N.isValidElement(n)?n:{message:n};this.create({id:r,type:"error",description:s,...a})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),null==t.finally||t.finally.call(t)}),i=()=>new Promise((e,t)=>a.then(()=>"reject"===s[0]?t(s[1]):e(s[1])).catch(t));return"string"!=typeof r&&"number"!=typeof r?{unwrap:i}:Object.assign(r,{unwrap:i})},this.custom=(e,t)=>{const r=(null==t?void 0:t.id)||wi++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ki=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,_i=(e,t)=>{const r=(null==t?void 0:t.id)||wi++;return xi.addToast({title:e,...t,id:r}),r},ji=Object.assign(_i,{success:xi.success,info:xi.info,warning:xi.warning,error:xi.error,custom:xi.custom,message:xi.message,promise:xi.promise,dismiss:xi.dismiss,loading:xi.loading},{getHistory:()=>xi.toasts,getToasts:()=>xi.getActiveToasts()});function Si({sessions:t,onDeleteSession:n,onClearTodaySessions:s,settings:o,onUpdateSettings:a}){const[i,l]=r.useState(""),[c,d]=r.useState("daily"),u=r.useMemo(()=>i?t.filter(e=>e.taskName.toLowerCase().includes(i.toLowerCase())):t,[t,i]),h=r.useMemo(()=>{const e=(new Date).toISOString().split("T")[0],t=u.filter(t=>t.date===e),r=t.filter(e=>"work"===e.type);return{totalPomodoros:r.length,totalWorkTime:r.reduce((e,t)=>e+t.duration,0),taskBreakdown:r.reduce((e,t)=>(e[t.taskName]=(e[t.taskName]||0)+1,e),{}),hourlyBreakdown:t.reduce((e,t)=>{const r=new Date(t.completedAt).getHours();return e[r]=(e[r]||0)+1,e},{}),sessions:t}},[u]),f=r.useMemo(()=>{const e=new Date,t=new Date(e);t.setDate(e.getDate()-e.getDay()),t.setHours(0,0,0,0);const r=u.filter(e=>new Date(e.date+"T00:00:00")>=t);return{dailyBreakdown:Array.from({length:7},(e,n)=>{const s=new Date(t);s.setDate(t.getDate()+n);const o=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,a=["日","一","二","三","四","五","六"][n],i=r.filter(e=>e.date===o&&"work"===e.type);return{day:a,date:o,pomodoros:i.length,workTime:i.reduce((e,t)=>e+t.duration,0)}}),taskStats:r.filter(e=>"work"===e.type).reduce((e,t)=>(e[t.taskName]=(e[t.taskName]||0)+1,e),{}),totalPomodoros:r.filter(e=>"work"===e.type).length}},[u]),p=r.useMemo(()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),r=u.filter(e=>new Date(e.date+"T00:00:00")>=t);return{weeklyBreakdown:Array.from({length:5},(e,n)=>{const s=new Date(t);s.setDate(t.getDate()+7*n);const o=new Date(s);o.setDate(s.getDate()+6);const a=r.filter(e=>{const t=new Date(e.date+"T00:00:00");return t>=s&&t<=o}).filter(e=>"work"===e.type);return{week:`第${n+1}週`,pomodoros:a.length,workTime:a.reduce((e,t)=>e+t.duration,0)}}).filter(e=>e.pomodoros>0),taskCategories:r.filter(e=>"work"===e.type).reduce((e,t)=>(e[t.taskName]=(e[t.taskName]||0)+1,e),{}),totalPomodoros:r.filter(e=>"work"===e.type).length}},[u]),m=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];return e.jsx("div",{className:"space-y-6",children:e.jsxs(tt,{children:[e.jsx(rt,{children:e.jsxs(nt,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qt,{className:"w-5 h-5"}),"生產力報表"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(dt,{variant:"outline",size:"sm",onClick:()=>{const e=u.map(e=>({"日期":e.date,"完成時間":new Date(e.completedAt).toLocaleString("zh-TW"),"任務名稱":e.taskName,"類型":"work"===e.type?"工作":"休息","時長分鐘":e.duration})),t=Object.keys(e[0]||{}),r=[t.join(","),...e.map(e=>t.map(t=>`"${e[t]}"`).join(","))].join("\n"),n=new Blob(["\ufeff"+r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),o=URL.createObjectURL(n);s.setAttribute("href",o),s.setAttribute("download",`番茄鐘紀錄_${(new Date).toISOString().split("T")[0]}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},disabled:0===u.length,children:[e.jsx(Nt,{className:"w-4 h-4 mr-1"}),"匯出 CSV"]}),e.jsxs(dt,{variant:"outline",size:"sm",onClick:()=>{const e=JSON.stringify(u,null,2),t=new Blob([e],{type:"application/json"}),r=document.createElement("a"),n=URL.createObjectURL(t);r.setAttribute("href",n),r.setAttribute("download",`番茄鐘紀錄_${(new Date).toISOString().split("T")[0]}.json`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},disabled:0===u.length,children:[e.jsx(Nt,{className:"w-4 h-4 mr-1"}),"匯出 JSON"]})]})]})}),e.jsxs(ot,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Mt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(ut,{placeholder:"搜尋任務名稱...",value:i,onChange:e=>l(e.target.value),className:"max-w-sm"})]}),e.jsxs(pi,{value:c,onValueChange:d,children:[e.jsxs(mi,{className:"grid w-full grid-cols-3",children:[e.jsx(gi,{value:"daily",children:"日報表"}),e.jsx(gi,{value:"weekly",children:"週報表"}),e.jsx(gi,{value:"monthly",children:"月報表"})]}),e.jsxs(vi,{value:"daily",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(tt,{children:e.jsxs(ot,{className:"p-4 text-center",children:[e.jsx(Ut,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"text-2xl font-mono",children:h.totalPomodoros}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"今日番茄鐘"})]})}),e.jsx(tt,{children:e.jsxs(ot,{className:"p-4 text-center",children:[e.jsx(St,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsxs("div",{className:"text-2xl font-mono",children:[Math.round(h.totalWorkTime),"分"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"專注時間"})]})}),e.jsx(tt,{children:e.jsxs(ot,{className:"p-4 text-center",children:[e.jsx(kt,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("div",{className:"text-2xl font-mono",children:Object.keys(h.taskBreakdown).length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"任務類型"})]})})]}),Object.keys(h.taskBreakdown).length>0&&e.jsxs(tt,{children:[e.jsx(rt,{children:e.jsx(nt,{children:"任務分布"})}),e.jsx(ot,{children:e.jsx(R,{width:"100%",height:300,children:e.jsxs(D,{children:[e.jsx(I,{data:Object.entries(h.taskBreakdown).map(([e,t])=>({name:e,value:t})),cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:Object.entries(h.taskBreakdown).map((t,r)=>e.jsx($,{fill:m[r%m.length]},`cell-${r}`))}),e.jsx(M,{})]})})})]}),e.jsxs(tt,{children:[e.jsxs(rt,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsx(nt,{children:"今日時程"}),h.sessions.length>0&&s&&e.jsxs(dt,{variant:"outline",size:"sm",onClick:s,className:"text-destructive hover:text-destructive",children:[e.jsx(Ft,{className:"w-4 h-4 mr-1"}),"清除全部"]})]}),e.jsx(ot,{children:e.jsxs("div",{className:"space-y-2",children:[h.sessions.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(bi,{variant:"work"===t.type?"default":"secondary",children:"work"===t.type?"工作":"休息"}),e.jsx("span",{children:t.taskName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(t.completedAt).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"})}),"work"===t.type&&o&&a&&e.jsx(dt,{variant:"ghost",size:"sm",onClick:()=>(e=>{if(!o||!a)return;if(o.customTaskList.includes(e))return void ji.info("此任務已在常用清單中");const t={...o,customTaskList:[...o.customTaskList,e]};a(t),ji.success(`已將「${e}」加入常用工作清單`)})(t.taskName),className:"opacity-0 group-hover:opacity-100 transition-opacity text-green-600 hover:text-green-700",title:"加入常用工作清單",children:e.jsx(Dt,{className:"w-4 h-4"})}),n&&e.jsx(dt,{variant:"ghost",size:"sm",onClick:()=>n(t.id),className:"opacity-0 group-hover:opacity-100 transition-opacity text-destructive hover:text-destructive",children:e.jsx(Vt,{className:"w-4 h-4"})})]})]},r)),0===h.sessions.length&&e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"今天還沒有完成任何番茄鐘"})]})})]})]}),e.jsxs(vi,{value:"weekly",className:"space-y-6",children:[e.jsxs(tt,{children:[e.jsx(rt,{children:e.jsx(nt,{children:"本週趨勢"})}),e.jsx(ot,{children:e.jsx(R,{width:"100%",height:300,children:e.jsxs(L,{data:f.dailyBreakdown,children:[e.jsx(B,{strokeDasharray:"3 3"}),e.jsx(U,{dataKey:"day"}),e.jsx(z,{}),e.jsx(M,{labelFormatter:e=>`星期${e}`,formatter:(e,t)=>[e,"pomodoros"===t?"番茄鐘數":"工作時間(分鐘)"]}),e.jsx(F,{dataKey:"pomodoros",fill:"#8884d8",name:"pomodoros"})]})})})]}),e.jsxs(tt,{children:[e.jsx(rt,{children:e.jsx(nt,{children:"本週任務統計"})}),e.jsx(ot,{children:e.jsxs("div",{className:"space-y-2",children:[Object.entries(f.taskStats).sort(([,e],[,t])=>t-e).map(([t,r])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{children:t}),e.jsxs(bi,{children:[r," 個番茄鐘"]})]},t)),0===Object.keys(f.taskStats).length&&e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"本週還沒有完成任何番茄鐘"})]})})]})]}),e.jsxs(vi,{value:"monthly",className:"space-y-6",children:[e.jsxs(tt,{children:[e.jsx(rt,{children:e.jsx(nt,{children:"本月每週進度"})}),e.jsx(ot,{children:e.jsx(R,{width:"100%",height:300,children:e.jsxs(q,{data:p.weeklyBreakdown,children:[e.jsx(B,{strokeDasharray:"3 3"}),e.jsx(U,{dataKey:"week"}),e.jsx(z,{}),e.jsx(M,{}),e.jsx(W,{type:"monotone",dataKey:"pomodoros",stroke:"#8884d8",strokeWidth:2,name:"番茄鐘數"})]})})})]}),e.jsxs(tt,{children:[e.jsx(rt,{children:e.jsx(nt,{children:"本月任務類別占比"})}),e.jsx(ot,{children:Object.keys(p.taskCategories).length>0?e.jsx(R,{width:"100%",height:300,children:e.jsxs(D,{children:[e.jsx(I,{data:Object.entries(p.taskCategories).map(([e,t])=>({name:e,value:t})),cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:Object.entries(p.taskCategories).map((t,r)=>e.jsx($,{fill:m[r%m.length]},`cell-${r}`))}),e.jsx(M,{})]})}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"本月還沒有完成任何番茄鐘"})})]})]})]})]})]})})}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");var Ti="horizontal",Ei=["horizontal","vertical"],Ni=r.forwardRef((t,r)=>{const{decorative:s,orientation:o=Ti,...a}=t,i=function(e){return Ei.includes(e)}(o)?o:Ti,l=s?{role:"none"}:{"aria-orientation":"vertical"===i?i:void 0,role:"separator"};return e.jsx(n.div,{"data-orientation":i,...l,...a,ref:r})});Ni.displayName="Separator";var Ci=Ni;function Pi({className:t,orientation:r="horizontal",decorative:n=!0,...s}){return e.jsx(Ci,{"data-slot":"separator-root",decorative:n,orientation:r,className:et("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...s})}function Oi(e){const t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Ai="Switch",[Ri]=h(Ai),[Di,Ii]=Ri(Ai),$i=r.forwardRef((t,s)=>{const{__scopeSwitch:o,name:a,checked:c,defaultChecked:d,required:u,disabled:h,value:f="on",onCheckedChange:p,form:m,...g}=t,[v,y]=r.useState(null),b=i(s,e=>y(e)),w=r.useRef(!1),x=!v||(m||!!v.closest("form")),[_,j]=k({prop:c,defaultProp:d??!1,onChange:p,caller:Ai});return e.jsxs(Di,{scope:o,checked:_,disabled:h,children:[e.jsx(n.button,{type:"button",role:"switch","aria-checked":_,"aria-required":u,"data-state":Ui(_),"data-disabled":h?"":void 0,disabled:h,value:f,...g,ref:b,onClick:l(t.onClick,e=>{j(e=>!e),x&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),x&&e.jsx(Bi,{control:v,bubbles:!w.current,name:a,value:f,checked:_,required:u,disabled:h,form:m,style:{transform:"translateX(-100%)"}})]})});$i.displayName=Ai;var Mi="SwitchThumb",Li=r.forwardRef((t,r)=>{const{__scopeSwitch:s,...o}=t,a=Ii(Mi,s);return e.jsx(n.span,{"data-state":Ui(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:r})});Li.displayName=Mi;var Bi=r.forwardRef(({__scopeSwitch:t,control:n,checked:s,bubbles:o=!0,...a},l)=>{const c=r.useRef(null),d=i(c,l),u=Oi(s),h=os(n);return r.useEffect(()=>{const e=c.current;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"checked").set;if(u!==s&&r){const t=new Event("click",{bubbles:o});r.call(e,s),e.dispatchEvent(t)}},[u,s,o]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:d,style:{...a.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Ui(e){return e?"checked":"unchecked"}Bi.displayName="SwitchBubbleInput";var zi=$i,Fi=Li;function qi({className:t,...r}){return e.jsx(zi,{"data-slot":"switch",className:et("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:e.jsx(Fi,{"data-slot":"switch-thumb",className:et("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Wi(e,[t,r]){return Math.min(r,Math.max(t,e))}var Ki=["PageUp","PageDown"],Vi=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Hi={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Gi="Slider",[Ji,Yi,Xi]=p(Gi),[Zi]=h(Gi,[Xi]),[Qi,el]=Zi(Gi),tl=r.forwardRef((t,n)=>{const{name:s,min:o=0,max:a=100,step:i=1,orientation:c="horizontal",disabled:d=!1,minStepsBetweenThumbs:u=0,defaultValue:h=[o],value:f,onValueChange:p=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:v,...y}=t,b=r.useRef(new Set),w=r.useRef(0),x="horizontal"===c?sl:ol,[_=[],j]=k({prop:f,defaultProp:h,onChange:e=>{const t=[...b.current];t[w.current]?.focus(),p(e)}}),S=r.useRef(_);function T(e,t,{commit:r}={commit:!1}){const n=function(e){return(String(e).split(".")[1]||"").length}(i),s=function(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}(Math.round((e-o)/i)*i+o,n),l=Wi(s,[o,a]);j((e=[])=>{const n=function(e=[],t,r){const n=[...e];return n[r]=t,n.sort((e,t)=>e-t)}(e,l,t);if(function(e,t){if(t>0){const r=function(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}(e);return Math.min(...r)>=t}return!0}(n,u*i)){w.current=n.indexOf(l);const t=String(n)!==String(e);return t&&r&&m(n),t?n:e}return e})}return e.jsx(Qi,{scope:t.__scopeSlider,name:s,disabled:d,min:o,max:a,valueIndexToChangeRef:w,thumbs:b.current,values:_,orientation:c,form:v,children:e.jsx(Ji.Provider,{scope:t.__scopeSlider,children:e.jsx(Ji.Slot,{scope:t.__scopeSlider,children:e.jsx(x,{"aria-disabled":d,"data-disabled":d?"":void 0,...y,ref:n,onPointerDown:l(y.onPointerDown,()=>{d||(S.current=_)}),min:o,max:a,inverted:g,onSlideStart:d?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const r=e.map(e=>Math.abs(e-t)),n=Math.min(...r);return r.indexOf(n)}(_,e);T(e,t)},onSlideMove:d?void 0:function(e){T(e,w.current)},onSlideEnd:d?void 0:function(){const e=S.current[w.current];_[w.current]!==e&&m(_)},onHomeKeyDown:()=>!d&&T(o,0,{commit:!0}),onEndKeyDown:()=>!d&&T(a,_.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!d){const r=Ki.includes(e.key)||e.shiftKey&&Vi.includes(e.key)?10:1,n=w.current;T(_[n]+i*r*t,n,{commit:!0})}}})})})})});tl.displayName=Gi;var[rl,nl]=Zi(Gi,{startEdge:"left",endEdge:"right",size:"width",direction:1}),sl=r.forwardRef((t,n)=>{const{min:s,max:o,dir:a,inverted:l,onSlideStart:c,onSlideMove:d,onSlideEnd:u,onStepKeyDown:h,...f}=t,[p,m]=r.useState(null),v=i(n,e=>m(e)),y=r.useRef(void 0),b=g(a),w="ltr"===b,x=w&&!l||!w&&l;function k(e){const t=y.current||p.getBoundingClientRect(),r=gl([0,t.width],x?[s,o]:[o,s]);return y.current=t,r(e-t.left)}return e.jsx(rl,{scope:t.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:e.jsx(al,{dir:b,"data-orientation":"horizontal",...f,ref:v,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=k(e.clientX);c?.(t)},onSlideMove:e=>{const t=k(e.clientX);d?.(t)},onSlideEnd:()=>{y.current=void 0,u?.()},onStepKeyDown:e=>{const t=Hi[x?"from-left":"from-right"].includes(e.key);h?.({event:e,direction:t?-1:1})}})})}),ol=r.forwardRef((t,n)=>{const{min:s,max:o,inverted:a,onSlideStart:l,onSlideMove:c,onSlideEnd:d,onStepKeyDown:u,...h}=t,f=r.useRef(null),p=i(n,f),m=r.useRef(void 0),g=!a;function v(e){const t=m.current||f.current.getBoundingClientRect(),r=gl([0,t.height],g?[o,s]:[s,o]);return m.current=t,r(e-t.top)}return e.jsx(rl,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:e.jsx(al,{"data-orientation":"vertical",...h,ref:p,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=v(e.clientY);l?.(t)},onSlideMove:e=>{const t=v(e.clientY);c?.(t)},onSlideEnd:()=>{m.current=void 0,d?.()},onStepKeyDown:e=>{const t=Hi[g?"from-bottom":"from-top"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),al=r.forwardRef((t,r)=>{const{__scopeSlider:s,onSlideStart:o,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:c,onEndKeyDown:d,onStepKeyDown:u,...h}=t,f=el(Gi,s);return e.jsx(n.span,{...h,ref:r,onKeyDown:l(t.onKeyDown,e=>{"Home"===e.key?(c(e),e.preventDefault()):"End"===e.key?(d(e),e.preventDefault()):Ki.concat(Vi).includes(e.key)&&(u(e),e.preventDefault())}),onPointerDown:l(t.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),f.thumbs.has(t)?t.focus():o(e)}),onPointerMove:l(t.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&a(e)}),onPointerUp:l(t.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),i(e))})})}),il="SliderTrack",ll=r.forwardRef((t,r)=>{const{__scopeSlider:s,...o}=t,a=el(il,s);return e.jsx(n.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...o,ref:r})});ll.displayName=il;var cl="SliderRange",dl=r.forwardRef((t,s)=>{const{__scopeSlider:o,...a}=t,l=el(cl,o),c=nl(cl,o),d=r.useRef(null),u=i(s,d),h=l.values.length,f=l.values.map(e=>ml(e,l.min,l.max)),p=h>1?Math.min(...f):0,m=100-Math.max(...f);return e.jsx(n.span,{"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,...a,ref:u,style:{...t.style,[c.startEdge]:p+"%",[c.endEdge]:m+"%"}})});dl.displayName=cl;var ul="SliderThumb",hl=r.forwardRef((t,n)=>{const s=Yi(t.__scopeSlider),[o,a]=r.useState(null),l=i(n,e=>a(e)),c=r.useMemo(()=>o?s().findIndex(e=>e.ref.current===o):-1,[s,o]);return e.jsx(fl,{...t,ref:l,index:c})}),fl=r.forwardRef((t,s)=>{const{__scopeSlider:o,index:a,name:c,...d}=t,u=el(ul,o),h=nl(ul,o),[f,p]=r.useState(null),m=i(s,e=>p(e)),g=!f||(u.form||!!f.closest("form")),v=os(f),y=u.values[a],b=void 0===y?0:ml(y,u.min,u.max),w=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(a,u.values.length),x=v?.[h.size],k=x?function(e,t,r){const n=e/2,s=gl([0,50],[0,n]);return(n-s(t)*r)*r}(x,b,h.direction):0;return r.useEffect(()=>{if(f)return u.thumbs.add(f),()=>{u.thumbs.delete(f)}},[f,u.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[h.startEdge]:`calc(${b}% + ${k}px)`},children:[e.jsx(Ji.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(n.span,{role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":u.min,"aria-valuenow":y,"aria-valuemax":u.max,"aria-orientation":u.orientation,"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,tabIndex:u.disabled?void 0:0,...d,ref:m,style:void 0===y?{display:"none"}:t.style,onFocus:l(t.onFocus,()=>{u.valueIndexToChangeRef.current=a})})}),g&&e.jsx(pl,{name:c??(u.name?u.name+(u.values.length>1?"[]":""):void 0),form:u.form,value:y},a)]})});hl.displayName=ul;var pl=r.forwardRef(({__scopeSlider:t,value:s,...o},a)=>{const l=r.useRef(null),c=i(l,a),d=Oi(s);return r.useEffect(()=>{const e=l.current;if(!e)return;const t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(d!==s&&r){const t=new Event("input",{bubbles:!0});r.call(e,s),e.dispatchEvent(t)}},[d,s]),e.jsx(n.input,{style:{display:"none"},...o,ref:c,defaultValue:s})});function ml(e,t,r){return Wi(100/(r-t)*(e-t),[0,100])}function gl(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}pl.displayName="RadioBubbleInput";var vl=tl,yl=ll,bl=dl,wl=hl;function xl({className:t,defaultValue:n,value:s,min:o=0,max:a=100,...i}){const l=r.useMemo(()=>Array.isArray(s)?s:Array.isArray(n)?n:[o,a],[s,n,o,a]);return e.jsxs(vl,{"data-slot":"slider",defaultValue:n,value:s,min:o,max:a,className:et("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...i,children:[e.jsx(yl,{"data-slot":"slider-track",className:et("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(bl,{"data-slot":"slider-range",className:et("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(t,r)=>e.jsx(wl,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},r))]})}function kl({settings:t,onSettingsChange:n}){const[s,o]=r.useState({...t,soundEnabled:t.soundEnabled??!0,soundVolume:t.soundVolume??.5,soundType:t.soundType??"bell",defaultTaskName:t.defaultTaskName??"專注工作",lastSelectedTask:t.lastSelectedTask??"",customTaskList:t.customTaskList??[]}),[a,i]=r.useState(!1),[l,c]=r.useState(""),d=(e,t)=>{let r=t;switch(e){case"workDuration":r=Math.max(1,Math.min(120,t));break;case"shortBreakDuration":r=Math.max(1,Math.min(30,t));break;case"longBreakDuration":r=Math.max(1,Math.min(60,t));break;case"pomodorosUntilLongBreak":r=Math.max(1,Math.min(10,t))}const n={...s,[e]:r};o(n),i(!0)},u=(e,t)=>{switch(e){case"workDuration":if(t<1||t>120)return"工作時間須在 1-120 分鐘之間";break;case"shortBreakDuration":if(t<1||t>30)return"短休息須在 1-30 分鐘之間";break;case"longBreakDuration":if(t<1||t>60)return"長休息須在 1-60 分鐘之間";break;case"pomodorosUntilLongBreak":if(t<1||t>10)return"間隔須在 1-10 番茄鐘之間"}return null},h=(e,t)=>{const r={...s,[e]:t};o(r),i(!0)},f=async e=>{if(s.soundEnabled||e)try{const t=new(window.AudioContext||window.webkitAudioContext);"suspended"===t.state&&await t.resume();const r=t.createOscillator(),n=t.createGain();r.connect(n),n.connect(t.destination);const o=e||s.soundType||"bell",a=s.soundVolume||.5;switch(o){case"bell":r.frequency.setValueAtTime(800,t.currentTime),r.frequency.exponentialRampToValueAtTime(400,t.currentTime+.3),r.type="sine";break;case"chime":r.frequency.setValueAtTime(1200,t.currentTime),r.frequency.linearRampToValueAtTime(900,t.currentTime+.4),r.type="sine";break;case"digital":r.frequency.setValueAtTime(600,t.currentTime),r.type="square";break;case"soft":r.frequency.setValueAtTime(440,t.currentTime),r.type="sine"}n.gain.setValueAtTime(a,t.currentTime),n.gain.exponentialRampToValueAtTime(.01,t.currentTime+.6),r.start(t.currentTime),r.stop(t.currentTime+.6),setTimeout(()=>{try{t.close()}catch(e){}},700)}catch(t){console.warn("無法播放測試音效:",t),alert("無法播放音效，可能因為瀏覽器限制。請確保已允許網站播放音效。")}},p=()=>{if(l.trim()&&!s.customTaskList.includes(l.trim())){const e=[...s.customTaskList,l.trim()];o(t=>({...t,customTaskList:e})),c(""),i(!0)}},m=e=>e<1?`${Math.round(60*e)}秒`:`${e}分`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(tt,{children:[e.jsx(rt,{children:e.jsxs(nt,{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"w-5 h-5"}),"計時器設定"]})}),e.jsxs(ot,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(pt,{htmlFor:"work-duration",className:"flex items-center gap-2",children:[e.jsx(St,{className:"w-4 h-4"}),"工作時間",e.jsx("span",{className:"text-sm text-muted-foreground",children:"(分鐘, 1-120)"})]}),e.jsx(ut,{id:"work-duration",type:"number",min:"1",max:"120",value:s.workDuration,onChange:e=>d("workDuration",parseInt(e.target.value)||25),className:u("workDuration",s.workDuration)?"border-red-500":""}),u("workDuration",s.workDuration)&&e.jsx("p",{className:"text-sm text-red-500",children:u("workDuration",s.workDuration)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(pt,{htmlFor:"short-break",className:"flex items-center gap-2",children:[e.jsx(Et,{className:"w-4 h-4"}),"短休息",e.jsx("span",{className:"text-sm text-muted-foreground",children:"(分鐘, 1-30)"})]}),e.jsx(ut,{id:"short-break",type:"number",min:"1",max:"30",value:s.shortBreakDuration,onChange:e=>d("shortBreakDuration",parseInt(e.target.value)||5),className:u("shortBreakDuration",s.shortBreakDuration)?"border-red-500":""}),u("shortBreakDuration",s.shortBreakDuration)&&e.jsx("p",{className:"text-sm text-red-500",children:u("shortBreakDuration",s.shortBreakDuration)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(pt,{htmlFor:"long-break",className:"flex items-center gap-2",children:[e.jsx(Et,{className:"w-4 h-4"}),"長休息",e.jsx("span",{className:"text-sm text-muted-foreground",children:"(分鐘, 1-60)"})]}),e.jsx(ut,{id:"long-break",type:"number",min:"1",max:"60",value:s.longBreakDuration,onChange:e=>d("longBreakDuration",parseInt(e.target.value)||15),className:u("longBreakDuration",s.longBreakDuration)?"border-red-500":""}),u("longBreakDuration",s.longBreakDuration)&&e.jsx("p",{className:"text-sm text-red-500",children:u("longBreakDuration",s.longBreakDuration)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(pt,{htmlFor:"pomodoros-until-long",className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"長休息間隔",e.jsx("span",{className:"text-sm text-muted-foreground",children:"(番茄鐘數, 1-10)"})]}),e.jsx(ut,{id:"pomodoros-until-long",type:"number",min:"1",max:"10",value:s.pomodorosUntilLongBreak,onChange:e=>d("pomodorosUntilLongBreak",parseInt(e.target.value)||4),className:u("pomodorosUntilLongBreak",s.pomodorosUntilLongBreak)?"border-red-500":""}),u("pomodorosUntilLongBreak",s.pomodorosUntilLongBreak)&&e.jsx("p",{className:"text-sm text-red-500",children:u("pomodorosUntilLongBreak",s.pomodorosUntilLongBreak)})]})]}),e.jsx(Pi,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"快速設定"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{name:"經典番茄鐘",settings:{workDuration:25,shortBreakDuration:5,longBreakDuration:15,pomodorosUntilLongBreak:4,soundEnabled:!0,soundVolume:.5,soundType:"bell",defaultTaskName:"專注工作",lastSelectedTask:"",customTaskList:[]}},{name:"短時專注",settings:{workDuration:15,shortBreakDuration:3,longBreakDuration:10,pomodorosUntilLongBreak:4,soundEnabled:!0,soundVolume:.5,soundType:"bell",defaultTaskName:"專注工作",lastSelectedTask:"",customTaskList:[]}},{name:"長時專注",settings:{workDuration:45,shortBreakDuration:10,longBreakDuration:30,pomodorosUntilLongBreak:3,soundEnabled:!0,soundVolume:.5,soundType:"bell",defaultTaskName:"專注工作",lastSelectedTask:"",customTaskList:[]}},{name:"學習模式",settings:{workDuration:50,shortBreakDuration:10,longBreakDuration:20,pomodorosUntilLongBreak:2,soundEnabled:!0,soundVolume:.5,soundType:"bell",defaultTaskName:"專注工作",lastSelectedTask:"",customTaskList:[]}},{name:"測試模式",settings:{workDuration:.1,shortBreakDuration:.05,longBreakDuration:.12,pomodorosUntilLongBreak:2,soundEnabled:!0,soundVolume:.5,soundType:"bell",defaultTaskName:"專注工作",lastSelectedTask:"",customTaskList:[]}}].map(t=>e.jsx(dt,{variant:"outline",onClick:()=>(e=>{o(e),i(!0)})(t.settings),className:"justify-start h-auto p-4",children:e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[m(t.settings.workDuration),"工作 / ",m(t.settings.shortBreakDuration),"休息 / ",m(t.settings.longBreakDuration),"長休息"]})]})},t.name))})]}),e.jsx(Pi,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"當前設定預覽"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-lg font-mono",children:m(s.workDuration)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"工作時間"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-lg font-mono",children:m(s.shortBreakDuration)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"短休息"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-lg font-mono",children:m(s.longBreakDuration)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"長休息"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-lg font-mono",children:s.pomodorosUntilLongBreak}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"長休息間隔"})]})]})]}),e.jsx(Pi,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(Ut,{className:"w-4 h-4"}),"預設任務設定"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(pt,{htmlFor:"default-task-name",children:"預設任務名稱"}),e.jsx(ut,{id:"default-task-name",value:s.defaultTaskName,onChange:e=>{o(t=>({...t,defaultTaskName:e.target.value})),i(!0)},placeholder:"請輸入預設任務名稱"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"當工作項目為空時，會自動使用此名稱"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pt,{children:"自定義任務項目"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ut,{value:l,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&p(),placeholder:"新增自定義任務..."}),e.jsx(dt,{onClick:p,variant:"outline",size:"icon",children:e.jsx(Dt,{className:"w-4 h-4"})})]}),s.customTaskList.length>0&&e.jsxs("div",{className:"space-y-2 mt-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"自定義任務列表："}),e.jsx("div",{className:"space-y-1",children:s.customTaskList.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsx("span",{className:"text-sm",children:t}),e.jsx(dt,{onClick:()=>(e=>{const t=s.customTaskList.filter(t=>t!==e);o(e=>({...e,customTaskList:t})),i(!0)})(t),variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",children:e.jsx(Ft,{className:"w-3 h-3"})})]},r))})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(dt,{onClick:()=>{n(s),i(!1)},disabled:!a,className:"flex items-center gap-2",children:[e.jsx($t,{className:"w-4 h-4"}),"儲存設定"]}),e.jsxs(dt,{onClick:()=>{o({workDuration:25,shortBreakDuration:5,longBreakDuration:15,pomodorosUntilLongBreak:4,soundEnabled:!0,soundVolume:.5,soundType:"bell",defaultTaskName:"專注工作",lastSelectedTask:"",customTaskList:[]}),i(!0)},variant:"outline",className:"flex items-center gap-2",children:[e.jsx(It,{className:"w-4 h-4"}),"重置為預設值"]})]}),a&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"* 有未儲存的變更"})]})]}),e.jsxs(tt,{children:[e.jsx(rt,{children:e.jsxs(nt,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5"}),"音效設定"]})}),e.jsx(ot,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(pt,{htmlFor:"sound-enabled",className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-4 h-4"}),"啟用音效提示"]}),e.jsx(qi,{id:"sound-enabled",checked:s.soundEnabled,onCheckedChange:e=>h("soundEnabled",e)})]}),s.soundEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(pt,{className:"flex items-center gap-2",children:["音量",e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",Math.round(100*(s.soundVolume||.5)),"%)"]})]}),e.jsx(xl,{value:[s.soundVolume||.5],onValueChange:([e])=>h("soundVolume",e),min:0,max:1,step:.1,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pt,{children:"音效類型"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"bell",label:"🔔 鐘聲",desc:"經典鈴聲"},{value:"chime",label:"🎵 風鈴",desc:"輕柔悅耳"},{value:"digital",label:"🔊 數位音",desc:"電子提示音"},{value:"soft",label:"🎶 柔和音",desc:"溫和提醒"}].map(t=>e.jsxs(dt,{type:"button",variant:s.soundType===t.value?"default":"outline",onClick:()=>{h("soundType",t.value),f(t.value)},className:"h-auto p-3 text-left justify-start relative group",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:t.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.desc})]}),s.soundType===t.value&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})})]},t.value))})]}),e.jsxs(dt,{type:"button",variant:"outline",onClick:f,className:"w-full",children:[e.jsx(Kt,{className:"w-4 h-4 mr-2"}),"測試音效"]})]})]})})]}),e.jsxs(tt,{children:[e.jsx(rt,{children:e.jsx(nt,{children:"使用提示"})}),e.jsxs(ot,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(bi,{variant:"outline",children:"🍅"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"番茄工作法："}),"專注工作 25 分鐘，然後休息 5 分鐘。每 4 個番茄鐘後進行一次長休息。"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(bi,{variant:"outline",children:"🔔"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"通知提醒："}),"建議開啟瀏覽器通知功能，以便在計時結束時收到提醒。"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(bi,{variant:"outline",children:"📊"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"數據追蹤："}),"所有完成的番茄鐘都會自動記錄，可在報表頁面查看詳細統計。"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(bi,{variant:"outline",children:"⚙️"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"個人化設定："}),"根據你的工作習慣調整時間長度，找到最適合的專注節奏。"]})]})]})]})]})}const _l={},jl=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),s=r?.nonce||r?.getAttribute("nonce");n=e(t.map(e=>{if((e=function(e){return"/Pomodoro/"+e}(e))in _l)return;_l[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,s&&n.setAttribute("nonce",s),document.head.appendChild(n),t?new Promise((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})};class Sl extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Tl extends Sl{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class El extends Sl{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Nl extends Sl{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Cl;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Cl||(Cl={}));var Pl=function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}l((n=n.apply(e,t||[])).next())})};class Ol{constructor(e,{headers:t={},customFetch:r,region:n=Cl.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>jl(async()=>{const{default:e}=await Promise.resolve().then(()=>Wl);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Pl(this,void 0,void 0,function*(){try{const{headers:n,method:s,body:o,signal:a}=t;let i={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);let d;l&&"any"!==l&&(i["x-region"]=l,c.searchParams.set("forceFunctionRegion",l)),o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",d=o):"string"==typeof o?(i["Content-Type"]="text/plain",d=o):"undefined"!=typeof FormData&&o instanceof FormData?d=o:(i["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(c.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),n),body:d,signal:a}).catch(e=>{if("AbortError"===e.name)throw e;throw new Tl(e)}),h=u.headers.get("x-relay-error");if(h&&"true"===h)throw new El(u);if(!u.ok)throw new Nl(u);let f,p=(null!==(r=u.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return f="application/json"===p?yield u.json():"application/octet-stream"===p?yield u.blob():"text/event-stream"===p?u:"multipart/form-data"===p?yield u.formData():yield u.text(),{data:f,error:null,response:u}}catch(n){return n instanceof Error&&"AbortError"===n.name?{data:null,error:new Tl(n)}:{data:null,error:n,response:n instanceof Nl||n instanceof El?n.context:void 0}}})}}var Al={},Rl={},Dl={},Il={},$l={},Ml={},Ll=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const Bl=Ll.fetch,Ul=Ll.fetch.bind(Ll),zl=Ll.Headers,Fl=Ll.Request,ql=Ll.Response,Wl=Object.freeze(Object.defineProperty({__proto__:null,Headers:zl,Request:Fl,Response:ql,default:Ul,fetch:Bl},Symbol.toStringTag,{value:"Module"})),Kl=P(Wl);var Vl,Hl,Gl,Jl,Yl,Xl,Zl,Ql={};function ec(){if(Vl)return Ql;Vl=1,Object.defineProperty(Ql,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return Ql.default=e,Ql}function tc(){if(Hl)return Ml;Hl=1;var e=Ml&&Ml.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ml,"__esModule",{value:!0});const t=e(Kl),r=e(ec());return Ml.default=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(r=e.shouldThrowOnError)&&void 0!==r&&r,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,s,o;let a=null,i=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const r=await e.text();""===r||(i="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}const r=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),o=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");r&&o&&o.length>1&&(l=parseInt(o[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(a={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,l=null,c=406,d="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(i=[],a=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null===(o=null==a?void 0:a.details)||void 0===o?void 0:o.includes("0 rows"))&&(a=null,c=200,d="OK"),a&&this.shouldThrowOnError)throw new r.default(a)}return{error:a,data:i,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,r,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}},Ml}function rc(){if(Gl)return $l;Gl=1;var e=$l&&$l.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($l,"__esModule",{value:!0});const t=e(tc());class r extends t.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=void 0===n?"offset":`${n}.offset`,o=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:o="text"}={}){var a;const i=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.get("Accept"))&&void 0!==a?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${l}"; options=${i};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return $l.default=r,$l}function nc(){if(Jl)return Il;Jl=1;var e=Il&&Il.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Il,"__esModule",{value:!0});const t=e(rc());class r extends t.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";"plain"===n?s="pl":"phrase"===n?s="ph":"websearch"===n&&(s="w");const o=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}return Il.default=r,Il}function sc(){if(Yl)return Dl;Yl=1;var e=Dl&&Dl.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dl,"__esModule",{value:!0});const t=e(nc());return Dl.default=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e)).join("");return this.url.searchParams.set("select",a),n&&this.headers.append("Prefer",`count=${n}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var s;if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new t.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==r&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new t.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}update(e,{count:r}={}){var n;return r&&this.headers.append("Prefer",`count=${r}`),new t.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:e}={}){var r;return e&&this.headers.append("Prefer",`count=${e}`),new t.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}},Dl}var oc=function(){if(Zl)return Al;Zl=1;var e=Al&&Al.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Al,"__esModule",{value:!0}),Al.PostgrestError=Al.PostgrestBuilder=Al.PostgrestTransformBuilder=Al.PostgrestFilterBuilder=Al.PostgrestQueryBuilder=Al.PostgrestClient=void 0;const t=e(function(){if(Xl)return Rl;Xl=1;var e=Rl&&Rl.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rl,"__esModule",{value:!0});const t=e(sc()),r=e(nc());class n{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){const r=new URL(`${this.url}/${e}`);return new t.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:o}={}){var a;let i;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(i=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(i="POST",c=t);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new r.default({method:i,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}}return Rl.default=n,Rl}());Al.PostgrestClient=t.default;const r=e(sc());Al.PostgrestQueryBuilder=r.default;const n=e(nc());Al.PostgrestFilterBuilder=n.default;const s=e(rc());Al.PostgrestTransformBuilder=s.default;const o=e(tc());Al.PostgrestBuilder=o.default;const a=e(ec());return Al.PostgrestError=a.default,Al.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:a.default},Al}();const ac=O(oc),{PostgrestClient:ic,PostgrestQueryBuilder:lc,PostgrestFilterBuilder:cc,PostgrestTransformBuilder:dc,PostgrestBuilder:uc,PostgrestError:hc}=ac;class fc{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const pc=1e4;var mc,gc,vc,yc,bc,wc;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(mc||(mc={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(gc||(gc={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(vc||(vc={})),function(e){e.websocket="websocket"}(yc||(yc={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(bc||(bc={}));class xc{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+n));o+=n;const i=r.decode(e.slice(o,o+s));o+=s;return{ref:null,topic:a,event:i,payload:JSON.parse(r.decode(e.slice(o,e.byteLength)))}}}class kc{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(wc||(wc={}));const _c=(e,t,r={})=>{var n;const s=null!==(n=r.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((r,n)=>(r[n]=jc(n,e,t,s),r),{})},jc=(e,t,r,n)=>{const s=t.find(t=>t.name===e),o=null==s?void 0:s.type,a=r[e];return o&&!n.includes(o)?Sc(o,a):Tc(a)},Sc=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return Pc(t,r)}switch(e){case wc.bool:return Ec(t);case wc.float4:case wc.float8:case wc.int2:case wc.int4:case wc.int8:case wc.numeric:case wc.oid:return Nc(t);case wc.json:case wc.jsonb:return Cc(t);case wc.timestamp:return Oc(t);case wc.abstime:case wc.date:case wc.daterange:case wc.int4range:case wc.int8range:case wc.money:case wc.reltime:case wc.text:case wc.time:case wc.timestamptz:case wc.timetz:case wc.tsrange:case wc.tstzrange:default:return Tc(t)}},Tc=e=>e,Ec=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Nc=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Cc=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Pc=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const o=e.slice(1,r);try{n=JSON.parse("["+o+"]")}catch(s){n=o?o.split(","):[]}return n.map(e=>Sc(t,e))}return e},Oc=e=>"string"==typeof e?e.replace(" ","T"):e,Ac=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Rc{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Dc,Ic,$c,Mc;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Dc||(Dc={}));class Lc{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Lc.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=Lc.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Lc.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const s=this.cloneDeep(e),o=this.transformState(t),a={},i={};return this.map(s,(e,t)=>{o[e]||(i[e]=t)}),this.map(o,(e,t)=>{const r=s[e];if(r){const n=t.map(e=>e.presence_ref),s=r.map(e=>e.presence_ref),o=t.filter(e=>s.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);o.length>0&&(a[e]=o),l.length>0&&(i[e]=l)}else a[e]=t}),this.syncDiff(s,{joins:a,leaves:i},r,n)}static syncDiff(e,t,r,n){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(s,(t,n)=>{var s;const o=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(n),o.length>0){const r=e[t].map(e=>e.presence_ref),n=o.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,o,n)}),this.map(o,(t,r)=>{let s=e[t];if(!s)return;const o=r.map(e=>e.presence_ref);s=s.filter(e=>o.indexOf(e.presence_ref)<0),e[t]=s,n(t,s,r),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(Ic||(Ic={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}($c||($c={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Mc||(Mc={}));class Bc{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=gc.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Rc(this,vc.join,this.params,this.timeout),this.rejoinTimer=new kc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gc.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gc.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=gc.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gc.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=gc.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vc.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Lc(this),this.broadcastEndpointURL=Ac(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==gc.closed){const{config:{broadcast:o,presence:a,private:i}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[$c.PRESENCE]&&this.bindings[$c.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),d={},u={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:l,private:i};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(Mc.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Mc.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const n=this.bindings.postgres_changes,s=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,o=[];for(let r=0;r<s;r++){const s=n[r],{filter:{event:a,schema:i,table:l,filter:c}}=s,d=t&&t[r];if(!d||d.event!==a||d.schema!==i||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=gc.errored,void(null==e||e(Mc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},s),{id:d.id}))}return this.bindings.postgres_changes=o,void(e&&e(Mc.SUBSCRIBED))}null==e||e(Mc.SUBSCRIBED)}).receive("error",t=>{this.state=gc.errored,null==e||e(Mc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Mc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===gc.joined&&e===$c.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,s,o;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(o=null===(s=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===s?void 0:s.broadcast)||void 0===o?void 0:o.ack)||r("ok"),a.receive("ok",()=>r("ok")),a.receive("error",()=>r("error")),a.receive("timeout",()=>r("timed out"))});{const{event:o,payload:a}=e,i={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=gc.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vc.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Rc(this,vc.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gc.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,s=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Rc(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,s;const o=e.toLocaleLowerCase(),{close:a,error:i,leave:l,join:c}=vc;if(r&&[a,i,l,c].indexOf(o)>=0&&r!==this._joinRef())return;let d=this._onMessage(o,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===o}).map(e=>e.callback(d,r)):null===(s=this.bindings[o])||void 0===s||s.filter(e=>{var r,n,s,a,i,l;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in e){const o=e.id,a=null===(r=e.filter)||void 0===r?void 0:r.event;return o&&(null===(n=t.ids)||void 0===n?void 0:n.includes(o))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const r=null===(i=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===i?void 0:i.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===o}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:n,type:s,errors:o}=e,a={schema:t,table:r,commit_timestamp:n,eventType:s,new:{},old:{},errors:o};d=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===gc.closed}_isJoined(){return this.state===gc.joined}_isJoining(){return this.state===gc.joining}_isLeaving(){return this.state===gc.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),s={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&Bc.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vc.close,{},e)}_onError(e){this._on(vc.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gc.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=_c(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=_c(e.columns,e.old_record)),t}}const Uc=()=>{},zc=25e3,Fc=10,qc=100,Wc=[1e3,2e3,5e3,1e4];class Kc{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pc,this.transport=null,this.heartbeatIntervalMs=zc,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Uc,this.ref=0,this.reconnectTimer=null,this.logger=Uc,this.conn=null,this.sendBuffer=[],this.serializer=new xc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>jl(async()=>{const{default:e}=await Promise.resolve().then(()=>Wl);return{default:e}},void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${yc.websocket}`,this.httpEndpoint=Ac(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fc.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case mc.connecting:return bc.Connecting;case mc.open:return bc.Open;case mc.closing:return bc.Closing;default:return bc.Closed}}isConnected(){return this.connectionState()===bc.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new Bc(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:s}=e,o=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${s})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},qc)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(i){this.log("error","error in heartbeat callback",i)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:s}=e,o=s?`(${s})`:"",a=n.status||"";this.log("receive",`${a} ${t} ${r} ${o}`.trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(vc.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const r={access_token:t,version:"realtime-js/2.15.5"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(vc.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new kc(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fc)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,s,o,a,i,l,c;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:pc,this.heartbeatIntervalMs=null!==(n=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:zc,this.worker=null!==(s=null==e?void 0:e.worker)&&void 0!==s&&s,this.accessToken=null!==(o=null==e?void 0:e.accessToken)&&void 0!==o?o:null,this.heartbeatCallback=null!==(a=null==e?void 0:e.heartbeatCallback)&&void 0!==a?a:Uc,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null==e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>Wc[e-1]||1e4,this.encode=null!==(l=null==e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null==e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Vc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Hc(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Gc extends Vc{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Jc extends Vc{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Yc=function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}l((n=n.apply(e,t||[])).next())})};const Xc=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>jl(async()=>{const{default:e}=await Promise.resolve().then(()=>Wl);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Zc=e=>{if(Array.isArray(e))return e.map(e=>Zc(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,r])=>{const n=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=Zc(r)}),t};var Qc=function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}l((n=n.apply(e,t||[])).next())})};const ed=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),td=(e,t,r)=>Qc(void 0,void 0,void 0,function*(){const n=yield Yc(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield jl(()=>Promise.resolve().then(()=>Wl),void 0)).Response:Response});e instanceof n&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{const n=e.status||500,s=(null==r?void 0:r.statusCode)||n+"";t(new Gc(ed(r),n,s))}).catch(e=>{t(new Jc(ed(e),e))}):t(new Jc(ed(e),e))}),rd=(e,t,r,n)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,(null==t?void 0:t.duplex)&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r)):s};function nd(e,t,r,n,s,o){return Qc(this,void 0,void 0,function*(){return new Promise((a,i)=>{e(r,rd(t,n,s,o)).then(e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>td(e,i,n))})})}function sd(e,t,r,n){return Qc(this,void 0,void 0,function*(){return nd(e,"GET",t,r,n)})}function od(e,t,r,n,s){return Qc(this,void 0,void 0,function*(){return nd(e,"POST",t,n,s,r)})}function ad(e,t,r,n,s){return Qc(this,void 0,void 0,function*(){return nd(e,"PUT",t,n,s,r)})}function id(e,t,r,n,s){return Qc(this,void 0,void 0,function*(){return nd(e,"DELETE",t,n,s,r)})}var ld=function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}l((n=n.apply(e,t||[])).next())})};class cd{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return ld(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Hc(e))return{data:null,error:e};throw e}})}}var dd=function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}l((n=n.apply(e,t||[])).next())})};class ud{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new cd(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return dd(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Hc(e))return{data:null,error:e};throw e}})}}var hd=function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}l((n=n.apply(e,t||[])).next())})};const fd={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class md{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Xc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return hd(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},pd),n);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const i=o.metadata;"undefined"!=typeof Blob&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),i&&s.append("metadata",this.encodeMetadata(i)),s.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),i&&s.append("metadata",this.encodeMetadata(i))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,i&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(i)))),(null==n?void 0:n.headers)&&(a=Object.assign(Object.assign({},a),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?ad:od)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:a},(null==o?void 0:o.duplex)?{duplex:o.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Hc(s))return{data:null,error:s};throw s}})}upload(e,t,r){return hd(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return hd(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:pd.upsert},n),o=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,o["cache-control"]=`max-age=${t.cacheControl}`,o["content-type"]=t.contentType);return{data:{path:s,fullPath:(yield ad(this.fetch,a.toString(),e,{headers:o})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Hc(i))return{data:null,error:i};throw i}})}createSignedUploadUrl(e,t){return hd(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const s=yield od(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Vc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hc(r))return{data:null,error:r};throw r}})}update(e,t,r){return hd(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return hd(this,void 0,void 0,function*(){try{return{data:yield od(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hc(n))return{data:null,error:n};throw n}})}copy(e,t,r){return hd(this,void 0,void 0,function*(){try{return{data:{path:(yield od(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hc(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return hd(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),s=yield od(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const o=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hc(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return hd(this,void 0,void 0,function*(){try{const n=yield od(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hc(n))return{data:null,error:n};throw n}})}download(e,t){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=n?`?${n}`:"",o=this._getFinalPath(e);return new ud(()=>sd(this.fetch,`${this.url}/${r}/${o}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return hd(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield sd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Zc(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hc(r))return{data:null,error:r};throw r}})}exists(e){return hd(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return Qc(this,void 0,void 0,function*(){return nd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hc(r)&&r instanceof Jc){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&n.push(s);const o=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&n.push(a);let i=n.join("&");return""!==i&&(i=`?${i}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${i}`)}}}remove(e){return hd(this,void 0,void 0,function*(){try{return{data:yield id(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hc(t))return{data:null,error:t};throw t}})}list(e,t,r){return hd(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},fd),t),{prefix:e||""});return{data:yield od(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hc(n))return{data:null,error:n};throw n}})}listV2(e,t){return hd(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield od(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hc(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const gd={"X-Client-Info":"storage-js/2.12.2"};var vd=function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}l((n=n.apply(e,t||[])).next())})};class yd{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);if(null==n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."))}this.url=s.href,this.headers=Object.assign(Object.assign({},gd),t),this.fetch=Xc(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return vd(this,void 0,void 0,function*(){try{return{data:yield sd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Hc(e))return{data:null,error:e};throw e}})}getBucket(e){return vd(this,void 0,void 0,function*(){try{return{data:yield sd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hc(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return vd(this,void 0,void 0,function*(){try{return{data:yield od(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hc(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return vd(this,void 0,void 0,function*(){try{return{data:yield ad(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hc(r))return{data:null,error:r};throw r}})}emptyBucket(e){return vd(this,void 0,void 0,function*(){try{return{data:yield od(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hc(t))return{data:null,error:t};throw t}})}deleteBucket(e){return vd(this,void 0,void 0,function*(){try{return{data:yield id(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Hc(t))return{data:null,error:t};throw t}})}}class bd extends yd{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new md(this.url,this.headers,e,this.fetch)}}let wd="";wd="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const xd={headers:{"X-Client-Info":`supabase-js-${wd}/2.58.0`}},kd={schema:"public"},_d={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jd={};var Sd=function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}l((n=n.apply(e,t||[])).next())})};const Td=e=>{let t;return t=e||("undefined"==typeof fetch?Ul:fetch),(...e)=>t(...e)},Ed=(e,t,r)=>{const n=Td(r),s="undefined"==typeof Headers?zl:Headers;return(r,o)=>Sd(void 0,void 0,void 0,function*(){var a;const i=null!==(a=yield t())&&void 0!==a?a:e;let l=new s(null==o?void 0:o.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${i}`),n(r,Object.assign(Object.assign({},o),{headers:l}))})};var Nd=function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}l((n=n.apply(e,t||[])).next())})};const Cd="2.72.0",Pd=3e4,Od=9e4,Ad={"X-Client-Info":`gotrue-js/${Cd}`},Rd="X-Supabase-Api-Version",Dd={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Id=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class $d extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Md(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Ld extends $d{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class Bd extends $d{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ud extends $d{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class zd extends Ud{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Fd extends Ud{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qd extends Ud{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Wd extends Ud{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kd extends Ud{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Vd extends Ud{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Hd(e){return Md(e)&&"AuthRetryableFetchError"===e.name}class Gd extends Ud{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Jd extends Ud{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xd=" \t\n\r=".split(""),Zd=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xd.length;t+=1)e[Xd[t].charCodeAt(0)]=-2;for(let t=0;t<Yd.length;t+=1)e[Yd[t].charCodeAt(0)]=t;return e})();function Qd(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Yd[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Yd[e]),t.queuedBits-=6}}function eu(e,t,r){const n=Zd[e];if(!(n>-1)){if(-2===n)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function tu(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let a=0;a<e.length;a+=1)eu(e.charCodeAt(a),s,o);return t.join("")}function ru(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function nu(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)eu(e.charCodeAt(s),r,n);return new Uint8Array(t)}function su(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}ru(n,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function ou(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>Qd(e,r,n)),Qd(null,r,n),t.join("")}const au=()=>"undefined"!=typeof window&&"undefined"!=typeof document,iu={tested:!1,writable:!1},lu=()=>{if(!au())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(iu.tested)return iu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),iu.tested=!0,iu.writable=!0}catch(t){iu.tested=!0,iu.writable=!1}return iu.writable};const cu=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>jl(async()=>{const{default:e}=await Promise.resolve().then(()=>Wl);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},du=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},uu=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},hu=async(e,t)=>{await e.removeItem(t)};class fu{constructor(){this.promise=new fu.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function pu(e){const t=e.split(".");if(3!==t.length)throw new Jd("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Id.test(t[r]))throw new Jd("JWT not in base64url format");return{header:JSON.parse(tu(t[0])),payload:JSON.parse(tu(t[1])),signature:nu(t[2]),raw:{header:t[0],payload:t[1]}}}function mu(e){return("0"+e.toString(16)).substr(-2)}async function gu(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vu(e,t,r=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,mu).join("")}();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await du(e,`${t}-code-verifier`,s);const o=await gu(n);return[o,n===o?"plain":"s256"]}fu.promiseConstructor=Promise;const yu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const bu=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wu(e){if(!bu.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xu(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ku(e){return JSON.parse(JSON.stringify(e))}var _u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};const ju=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Su=[502,503,504];async function Tu(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new Vd(ju(e),0);if(Su.includes(e.status))throw new Vd(ju(e),e.status);let n,s;try{n=await e.json()}catch(a){throw new Bd(ju(a),a)}const o=function(e){const t=e.headers.get(Rd);if(!t)return null;if(!t.match(yu))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(a){return null}}(e);if(o&&o.getTime()>=Dd.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?s=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(s=n.error_code),s){if("weak_password"===s)throw new Gd(ju(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new zd}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Gd(ju(n),e.status,n.weak_password.reasons);throw new Ld(ju(n),e.status||500,s)}async function Eu(e,t,r,n){var s;const o=Object.assign({},null==n?void 0:n.headers);o[Rd]||(o[Rd]=Dd.name),(null==n?void 0:n.jwt)&&(o.Authorization=`Bearer ${n.jwt}`);const a=null!==(s=null==n?void 0:n.query)&&void 0!==s?s:{};(null==n?void 0:n.redirectTo)&&(a.redirect_to=n.redirectTo);const i=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,r,n,s,o){const a=((e,t,r,n)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))})(t,n,s,o);let i;try{i=await e(r,Object.assign({},a))}catch(l){throw console.error(l),new Vd(ju(l),0)}i.ok||await Tu(i);if(null==n?void 0:n.noResolveJson)return i;try{return await i.json()}catch(l){await Tu(l)}}(e,t,r+i,{headers:o,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function Nu(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Cu(e){const t=Nu(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Pu(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ou(e){return{data:e,error:null}}function Au(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,a=_u(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},user:Object.assign({},a)},error:null}}function Ru(e){return e}const Du=["global","local","others"];var Iu=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};class $u{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=cu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Du[0]){if(Du.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Du.join(", ")}`);try{return await Eu(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Md(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Eu(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Pu})}catch(r){if(Md(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Iu(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await Eu(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Au,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Md(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Eu(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Pu})}catch(t){if(Md(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,s,o,a,i;try{const l={nextPage:null,lastPage:0,total:0},c=await Eu(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(s=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==s?s:""},xform:Ru});if(c.error)throw c.error;const d=await c.json(),u=null!==(o=c.headers.get("x-total-count"))&&void 0!==o?o:0,h=null!==(i=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==i?i:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Md(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){wu(e);try{return await Eu(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Pu})}catch(t){if(Md(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wu(e);try{return await Eu(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Pu})}catch(r){if(Md(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){wu(e);try{return await Eu(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Pu})}catch(r){if(Md(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){wu(e.userId);try{const{data:t,error:r}=await Eu(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Md(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wu(e.userId),wu(e.id);try{return{data:await Eu(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Md(t))return{data:null,error:t};throw t}}}function Mu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Lu=!!(globalThis&&lu()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Bu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Uu extends Bu{}async function zu(e,t,r){Lu&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Lu&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw Lu&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Uu(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Lu)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}Lu&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{Lu&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}function Fu(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function qu(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Wu={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ad,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ku(e,t,r){return await r()}const Vu={};class Hu{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hu.nextInstanceID,Hu.nextInstanceID+=1,this.instanceID>0&&au()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Wu),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new $u({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=cu(n.fetch),this.lock=n.lock||Ku,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:au()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=zu:this.lock=Ku,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:lu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mu(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Mu(this.memoryStorage)),au()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Vu[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Vu[this.storageKey]=Object.assign(Object.assign({},Vu[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Vu[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vu[this.storageKey]=Object.assign(Object.assign({},Vu[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Cd}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(n){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),au()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return Md(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Md(t)?{error:t}:{error:new Bd("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const s=await Eu(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:Nu}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const i=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(s){if(Md(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,n;try{let s;if("email"in e){const{email:r,password:n,options:o}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await vu(this.storage,this.storageKey)),s=await Eu(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==o?void 0:o.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null==o?void 0:o.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken},code_challenge:a,code_challenge_method:i},xform:Nu})}else{if(!("phone"in e))throw new qd("You must provide either an email or phone number and a password");{const{phone:t,password:o,options:a}=e;s=await Eu(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:o,data:null!==(r=null==a?void 0:a.data)&&void 0!==r?r:{},channel:null!==(n=null==a?void 0:a.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Nu})}}const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const i=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(s){if(Md(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:s}=e;t=await Eu(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Cu})}else{if(!("phone"in e))throw new qd("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:s}=e;t=await Eu(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Cu})}}const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}):{data:{user:null,session:null},error:new Fd}}catch(t){if(Md(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,n,s,o,a,i,l,c,d,u;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:d,wallet:u,statement:p,options:m}=e;let g;if(au())if("object"==typeof u)g=u;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!=typeof u||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=u}const v=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href),y=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=Fu(y[0]);let w=null===(r=null==m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!w){const e=await g.request({method:"eth_chainId"});w=parseInt(e,16)}h=function(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:o=new Date,nonce:a,notBefore:i,requestId:l,resources:c,scheme:d,uri:u,version:h}=e;if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const f=`${d?`${d}://${n}`:n} wants you to sign in with your Ethereum account:\n${Fu(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let p=`URI: ${u}\nVersion: ${h}\nChain ID: ${r}${a?`\nNonce: ${a}`:""}\nIssued At: ${o.toISOString()}`;if(s&&(p+=`\nExpiration Time: ${s.toISOString()}`),i&&(p+=`\nNot Before: ${i.toISOString()}`),l&&(p+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}p+=e}return`${f}\n${p}`}({domain:v.host,address:b,statement:p,uri:v.href,version:"1",chainId:w,nonce:null===(n=null==m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.nonce,issuedAt:null!==(o=null===(s=null==m?void 0:m.signInWithEthereum)||void 0===s?void 0:s.issuedAt)&&void 0!==o?o:new Date,expirationTime:null===(a=null==m?void 0:m.signInWithEthereum)||void 0===a?void 0:a.expirationTime,notBefore:null===(i=null==m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.notBefore,requestId:null===(l=null==m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await g.request({method:"personal_sign",params:[qu(h),b]})}try{const{data:t,error:r}=await Eu(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:Nu});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new Fd}}catch(p){if(Md(p))return{data:{user:null,session:null},error:p};throw p}}async signInWithSolana(e){var t,r,n,s,o,a,i,l,c,d,u,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:m,options:g}=e;let v;if(au())if("object"==typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v&&"function"==typeof v.signMessage&&"publicKey"in v&&"object"==typeof v&&v.publicKey&&"toBase58"in v.publicKey&&"function"==typeof v.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${y.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(n=null===(r=null==g?void 0:g.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()}`,...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await Eu(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:ou(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Nu});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new Fd}}catch(m){if(Md(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await uu(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{const{data:t,error:s}=await Eu(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Nu});if(await hu(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new Fd}}catch(s){if(Md(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:s,nonce:o}=e,a=await Eu(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Nu}),{data:i,error:l}=a;return l?{data:{user:null,session:null},error:l}:i&&i.session&&i.user?(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:i,error:l}):{data:{user:null,session:null},error:new Fd}}catch(t){if(Md(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,s,o;try{if("email"in e){const{email:n,options:s}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await vu(this.storage,this.storageKey));const{error:i}=await Eu(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(r=null==s?void 0:s.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:o,code_challenge_method:a},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:t,options:r}=e,{data:a,error:i}=await Eu(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(s=null==r?void 0:r.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(o=null==r?void 0:r.channel)&&void 0!==o?o:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:i}}throw new qd("You must provide either an email or phone number.")}catch(a){if(Md(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let n,s;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:o,error:a}=await Eu(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:n,xform:Nu});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const i=o.session,l=o.user;return(null==i?void 0:i.access_token)&&(await this._saveSession(i),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",i)),{data:{user:l,session:i},error:null}}catch(n){if(Md(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let s=null,o=null;return"pkce"===this.flowType&&([s,o]=await vu(this.storage,this.storageKey)),await Eu(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Ou})}catch(s){if(Md(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new zd;const{error:n}=await Eu(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(Md(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:s}=e,{error:o}=await Eu(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:r,type:n,options:s}=e,{data:o,error:a}=await Eu(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new qd("You must provide either an email or phone number and a type")}catch(t){if(Md(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await uu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<Od;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await uu(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=xu()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,n)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,n))})}return{data:{session:e},error:null}}const{session:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Eu(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Pu}):await this._useSession(async e=>{var t,r,n;const{data:s,error:o}=e;if(o)throw o;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Eu(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=s.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:Pu}):{data:{user:null},error:new zd}})}catch(t){if(Md(t))return function(e){return Md(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await hu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:s}=r;if(s)throw s;if(!n.session)throw new zd;const o=n.session;let a=null,i=null;"pkce"===this.flowType&&null!=e.email&&([a,i]=await vu(this.storage,this.storageKey));const{data:l,error:c}=await Eu(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:i}),jwt:o.access_token,xform:Pu});if(c)throw c;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Md(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new zd;const t=Date.now()/1e3;let r=t,n=!0,s=null;const{payload:o}=pu(e.access_token);if(o.exp&&(r=o.exp,n=r<=t),n){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:n,error:o}=await this._getUser(e.access_token);if(o)throw o;s={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Md(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:s}=t;if(s)throw s;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new zd;const{session:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Md(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!au())throw new Wd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Wd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Kd("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Wd("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Kd("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:s,refresh_token:o,expires_in:a,expires_at:i,token_type:l}=e;if(!(s&&a&&o&&l))throw new Wd("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let u=c+d;i&&(u=parseInt(i));const h=u-c;1e3*h<=Pd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const f=u-d;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,u,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,u,c);const{data:p,error:m}=await this._getUser(s);if(m)throw m;const g={provider_token:r,provider_refresh_token:n,access_token:s,expires_in:d,expires_at:u,refresh_token:o,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(Md(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await uu(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:s}=t;if(s)return{error:s};const o=null===(r=n.session)||void 0===r?void 0:r.access_token;if(o){const{error:t}=await this.admin.signOut(o,e);if(t&&(!function(e){return Md(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await hu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:s}=t;if(s)throw s;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(ah){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",ah),console.error(ah)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await vu(this.storage,this.storageKey,!0));try{return await Eu(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Md(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Md(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,s,o,a;const{data:i,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await Eu(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(o=i.session)||void 0===o?void 0:o.access_token)&&void 0!==a?a:void 0})});if(n)throw n;return au()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),{data:{provider:e.provider,url:null==r?void 0:r.url},error:null}}catch(r){if(Md(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:s,error:o}=t;if(o)throw o;return await Eu(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=s.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(Md(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Eu(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Nu})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&Hd(t)&&Date.now()+r-s<Pd},new Promise((e,t)=>{(async()=>{for(let o=0;o<1/0;o++)try{const t=await r(o);if(!n(o,null,t))return void e(t)}catch(s){if(!n(o,s))return void t(s)}})()}))}catch(s){if(this._debug(t,"error",s),Md(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),au()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await uu(this.storage,this.storageKey);if(s&&this.userStorage){let t=await uu(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:s.user},await du(this.userStorage,this.storageKey+"-user",t)),s.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:xu()}else if(s&&!s.user&&!s.user){const e=await uu(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(s.user=e.user,await hu(this.storage,this.storageKey+"-user"),await du(this.storage,this.storageKey,s)):s.user=xu()}if(this._debug(r,"session from storage",s),!this._isValidSession(s))return this._debug(r,"session is not valid"),void(null!==s&&await this._removeSession());const o=1e3*(null!==(t=s.expires_at)&&void 0!==t?t:1/0)-Date.now()<Od;if(this._debug(r,`session has${o?"":" not"} expired with margin of 90000s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),Hd(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(s.access_token);!t&&(null==e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(ah){return this._debug(r,"error",ah),void console.error(ah)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new zd;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new fu;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new zd;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(s){if(this._debug(n,"error",s),Md(s)){const e={session:null,error:s};return Hd(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],s=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(s){n.push(s)}});if(await Promise.all(s),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await du(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=ku(e);await du(this.storage,this.storageKey,n)}else{const e=ku(t);await du(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await hu(this.storage,this.storageKey),await hu(this.storage,this.storageKey+"-code-verifier"),await hu(this.storage,this.storageKey+"-user"),this.userStorage&&await hu(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&au()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pd);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-t)/Pd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Bu))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!au()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await vu(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;return s?{data:null,error:s}:await Eu(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Md(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:i,error:l}=await Eu(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(n=null==i?void 0:i.totp)||void 0===n?void 0:n.qr_code)&&(i.totp.qr_code=`data:image/svg+xml;utf-8,${i.totp.qr_code}`),{data:i,error:null})})}catch(t){if(Md(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await Eu(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Md(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;return s?{data:null,error:s}:await Eu(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Md(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null==e?void 0:e.factors)||[],n=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),s=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:n,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:s}=e;if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=pu(n.access_token);let a=null;o.aal&&(a=o.aal);let i=a;(null!==(r=null===(t=n.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(i="aal2");return{data:{currentLevel:a,nextLevel:i,currentAuthenticationMethods:o.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(t=>t.kid===e),r&&this.jwks_cached_at+6e5>n)return r;const{data:s,error:o}=await Eu(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=n,r=s.keys.find(t=>t.kid===e),r||null):null}async getClaims(e,t={}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:n,payload:s,signature:o,raw:{header:a,payload:i}}=pu(r);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:s,header:n,signature:o},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,o,su(`${a}.${i}`))))throw new Jd("Invalid JWT signature");return{data:{claims:s,header:n,signature:o},error:null}}catch(r){if(Md(r))return{data:null,error:r};throw r}}}Hu.nextInstanceID=0;const Gu=Hu;class Ju extends Gu{constructor(e){super(e)}}var Yu=function(e,t,r,n){return new(r||(r=Promise))(function(s,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,i)}l((n=n.apply(e,t||[])).next())})};class Xu{constructor(e,t,r){var n,s,o;this.supabaseUrl=e,this.supabaseKey=t;const a=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const i=`sb-${a.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,n;const{db:s,auth:o,realtime:a,global:i}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},u),i),{headers:Object.assign(Object.assign({},null!==(r=null==u?void 0:u.headers)&&void 0!==r?r:{}),null!==(n=null==i?void 0:i.headers)&&void 0!==n?n:{})}),accessToken:()=>Nd(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=r?r:{},{db:kd,realtime:jd,auth:Object.assign(Object.assign({},_d),{storageKey:i}),global:xd});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(s=l.global.headers)&&void 0!==s?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(o=l.auth)&&void 0!==o?o:{},this.headers,l.global.fetch),this.fetch=Ed(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new ic(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new bd(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Ol(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Yu(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:o,flowType:a,lock:i,debug:l},c,d){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ju({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),c),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:a,lock:i,debug:l,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Kc(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zu=((e,t,r)=>new Xu(e,t,r))("https://thgtezpxlnznrdyoxflf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRoZ3RlenB4bG56bnJkeW94ZmxmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxODY4NDUsImV4cCI6MjA3NDc2Mjg0NX0.xnvSEgPKAdyz5PalRF5r1gn3ST61-0ILtHxDVqvGP84"),Qu=r.createContext(void 0);function eh({children:t}){const[n,s]=r.useState(null),[o,a]=r.useState(null),[i,l]=r.useState(!0);r.useEffect(()=>{Zu.auth.getSession().then(({data:{session:e}})=>{a(e),s(e?.user??null),l(!1)});const{data:{subscription:e}}=Zu.auth.onAuthStateChange((e,t)=>{a(t),s(t?.user??null),l(!1)});return()=>e.unsubscribe()},[]);const c={user:n,session:o,loading:i,signUp:async(e,t)=>{const{error:r}=await Zu.auth.signUp({email:e,password:t});return{error:r}},signIn:async(e,t)=>{const{error:r}=await Zu.auth.signInWithPassword({email:e,password:t});return{error:r}},signInWithGoogle:async()=>{const e=`${window.location.origin}/Pomodoro/`,{error:t}=await Zu.auth.signInWithOAuth({provider:"google",options:{redirectTo:e}});return{error:t}},signInWithFacebook:async()=>{const{error:e}=await Zu.auth.signInWithOAuth({provider:"facebook"});return{error:e}},signOut:async()=>{const{error:e}=await Zu.auth.signOut();return{error:e}}};return e.jsx(Qu.Provider,{value:c,children:t})}function th(){const e=r.useContext(Qu);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}function rh({onSkip:t}){const{signIn:n,signUp:s,signInWithGoogle:o}=th(),[a,i]=r.useState(!1),[l,c]=r.useState(null),[d,u]=r.useState(null),[h,f]=r.useState(""),[p,m]=r.useState(""),[g,v]=r.useState(""),[y,b]=r.useState(""),[w,x]=r.useState(""),k=async()=>{i(!0),c(null);const{error:e}=await o();e&&(c(e.message),i(!1))};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs(tt,{className:"w-full max-w-sm",children:[e.jsxs(rt,{className:"text-center",children:[e.jsx(nt,{className:"text-3xl font-bold",children:"🍅 Pomodoro Timer"}),e.jsx(st,{children:"專注工作，提升效率"})]}),e.jsxs(ot,{children:[e.jsxs(pi,{defaultValue:"login",className:"w-full",children:[e.jsxs(mi,{className:"grid w-full grid-cols-2",children:[e.jsx(gi,{value:"login",children:"登入"}),e.jsx(gi,{value:"register",children:"註冊"})]}),e.jsxs(vi,{value:"login",children:[e.jsx("div",{className:"space-y-4 mb-4",children:e.jsxs(dt,{type:"button",variant:"outline",className:"w-full",onClick:k,disabled:a,children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"使用 Google 登入"]})}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"或使用電子郵件"})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),i(!0),c(null),u(null);const{error:t}=await n(h,p);t?c(t.message):u("登入成功！"),i(!1)},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(pt,{htmlFor:"login-email",children:"電子郵件"}),e.jsx(ut,{id:"login-email",type:"email",placeholder:"your@email.com",value:h,onChange:e=>f(e.target.value),required:!0,disabled:a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pt,{htmlFor:"login-password",children:"密碼"}),e.jsx(ut,{id:"login-password",type:"password",placeholder:"••••••••",value:p,onChange:e=>m(e.target.value),required:!0,disabled:a})]}),l&&e.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:l}),d&&e.jsx("div",{className:"p-3 text-sm text-green-600 bg-green-50 border border-green-200 rounded-md",children:d}),e.jsx(dt,{type:"submit",className:"w-full",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(Ct,{className:"w-4 h-4 mr-2 animate-spin"}),"登入中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"登入"]})})]})]}),e.jsxs(vi,{value:"register",children:[e.jsx("div",{className:"space-y-4 mb-4",children:e.jsxs(dt,{type:"button",variant:"outline",className:"w-full",onClick:k,disabled:a,children:[e.jsxs("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"使用 Google 註冊"]})}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"或使用電子郵件"})})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),i(!0),c(null),u(null),y!==w)return c("密碼不一致"),void i(!1);if(y.length<6)return c("密碼至少需要 6 個字元"),void i(!1);const{error:t}=await s(g,y);t?c(t.message):(u("註冊成功！請檢查您的電子郵件以驗證帳戶。"),v(""),b(""),x("")),i(!1)},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(pt,{htmlFor:"register-email",children:"電子郵件"}),e.jsx(ut,{id:"register-email",type:"email",placeholder:"your@email.com",value:g,onChange:e=>v(e.target.value),required:!0,disabled:a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pt,{htmlFor:"register-password",children:"密碼"}),e.jsx(ut,{id:"register-password",type:"password",placeholder:"至少 6 個字元",value:y,onChange:e=>b(e.target.value),required:!0,disabled:a})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pt,{htmlFor:"register-confirm-password",children:"確認密碼"}),e.jsx(ut,{id:"register-confirm-password",type:"password",placeholder:"再次輸入密碼",value:w,onChange:e=>x(e.target.value),required:!0,disabled:a})]}),l&&e.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:l}),d&&e.jsx("div",{className:"p-3 text-sm text-green-600 bg-green-50 border border-green-200 rounded-md",children:d}),e.jsx(dt,{type:"submit",className:"w-full",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(Ct,{className:"w-4 h-4 mr-2 animate-spin"}),"註冊中..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Wt,{className:"w-4 h-4 mr-2"}),"註冊"]})})]})]})]}),t&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"或"})})]}),e.jsxs(dt,{variant:"outline",className:"w-full border-2 border-dashed hover:bg-secondary/80",size:"lg",onClick:t,children:[e.jsx(Tt,{className:"w-4 h-4 mr-2"}),"略過登入，離線使用"]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground mt-3 px-2",children:"💡 離線模式下資料僅儲存在本機，不會同步到雲端"})]})]})]})})}const nh={workDuration:25,shortBreakDuration:5,longBreakDuration:15,pomodorosUntilLongBreak:4,soundEnabled:!0,soundVolume:.5,soundType:"bell",defaultTaskName:"專注工作",lastSelectedTask:"",customTaskList:[]};function sh(){const{user:t,loading:n,signOut:s}=th(),{syncing:o,syncSessionToSupabase:a,loadSessionsFromSupabase:i,deleteSessionFromSupabase:l,deleteSessionsFromSupabase:c,saveSettingsToSupabase:d,loadSettingsFromSupabase:u}=function(){const{user:e}=th(),[t,n]=r.useState(!1);return{syncing:t,syncSessionToSupabase:async t=>{if(e)try{const{error:r}=await Zu.from("pomodoro_sessions").insert({id:t.id,user_id:e.id,task_name:t.taskName,duration:t.duration,type:t.type,completed_at:t.completedAt,date:t.date});if(r)throw r}catch(r){console.error("Error syncing session to Supabase:",r)}},loadSessionsFromSupabase:async()=>{if(!e)return[];try{n(!0);const{data:t,error:r}=await Zu.from("pomodoro_sessions").select("*").eq("user_id",e.id).order("completed_at",{ascending:!1});if(r)throw r;return(t||[]).map(e=>({id:e.id,taskName:e.task_name,duration:e.duration,type:e.type,completedAt:new Date(e.completed_at),date:e.date}))}catch(t){return console.error("Error loading sessions from Supabase:",t),[]}finally{n(!1)}},deleteSessionFromSupabase:async t=>{if(e)try{const{error:r}=await Zu.from("pomodoro_sessions").delete().eq("id",t).eq("user_id",e.id);if(r)throw r}catch(r){console.error("Error deleting session from Supabase:",r)}},deleteSessionsFromSupabase:async t=>{if(e&&0!==t.length)try{const{error:r}=await Zu.from("pomodoro_sessions").delete().in("id",t).eq("user_id",e.id);if(r)throw r}catch(r){console.error("Error deleting sessions from Supabase:",r)}},saveSettingsToSupabase:async t=>{if(e)try{const{error:r}=await Zu.from("user_settings").upsert({user_id:e.id,work_duration:Math.round(60*t.workDuration),short_break_duration:Math.round(60*t.shortBreakDuration),long_break_duration:Math.round(60*t.longBreakDuration),pomodoros_until_long_break:t.pomodorosUntilLongBreak,sound_enabled:t.soundEnabled,sound_type:t.soundType,sound_volume:t.soundVolume,default_task_name:t.defaultTaskName,last_selected_task:t.lastSelectedTask,custom_task_list:t.customTaskList||[]});if(r)throw r}catch(r){console.error("Error saving settings to Supabase:",r)}},loadSettingsFromSupabase:async()=>{if(!e)return null;try{n(!0);const{data:t,error:r}=await Zu.from("user_settings").select("*").eq("user_id",e.id).single();if(r){if("PGRST116"===r.code)return null;throw r}return{workDuration:t.work_duration/60,shortBreakDuration:t.short_break_duration/60,longBreakDuration:t.long_break_duration/60,pomodorosUntilLongBreak:t.pomodoros_until_long_break,soundEnabled:t.sound_enabled,soundType:t.sound_type,soundVolume:t.sound_volume,defaultTaskName:t.default_task_name,lastSelectedTask:t.last_selected_task,customTaskList:t.custom_task_list}}catch(t){return console.error("Error loading settings from Supabase:",t),null}finally{n(!1)}}}}(),[h,f]=r.useState([]),[p,m]=r.useState(nh),[g,v]=r.useState("timer"),[y,b]=r.useState(!0),[w,x]=r.useState(!1);r.useEffect(()=>{(async()=>{if(t&&!w){const[e,t]=await Promise.all([i(),u()]);if(e.length>0)f(e);else{const e=localStorage.getItem("pomodoroSessions");if(e){const t=JSON.parse(e).map(e=>({...e,completedAt:new Date(e.completedAt)}));f(t);for(const e of t)await a(e)}}if(t)m(t);else{const e=localStorage.getItem("pomodoroSettings");let t=nh;if(e){const r=JSON.parse(e);t={...nh,...r},m(t)}await d(t)}}else{const e=localStorage.getItem("pomodoroSessions"),t=localStorage.getItem("pomodoroSettings");if(e){const t=JSON.parse(e).map(e=>({...e,completedAt:new Date(e.completedAt)}));f(t)}if(t){const e=JSON.parse(t);m({...nh,...e})}}b(!1)})()},[t,w]),r.useEffect(()=>{t&&!w||y||localStorage.setItem("pomodoroSessions",JSON.stringify(h))},[h,t,w,y]),r.useEffect(()=>{t&&!w||y||localStorage.setItem("pomodoroSettings",JSON.stringify(p))},[p,t,w,y]);const k=async e=>{m(e),t&&!w&&await d(e)};if(n||y)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(Ct,{className:"w-8 h-8 animate-spin text-primary"})});const _=()=>{x(!0),b(!1)};return t||w?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex-1"}),e.jsx("h1",{className:"text-4xl",children:"🍅 Pomodoro Timer"}),e.jsx("div",{className:"flex-1 flex justify-end",children:w?e.jsxs(dt,{variant:"outline",size:"sm",onClick:()=>{x(!1),window.location.reload()},children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"登入"]}):e.jsxs(dt,{variant:"outline",size:"sm",onClick:async()=>{await s(),f([]),m(nh)},children:[e.jsx(Ot,{className:"w-4 h-4 mr-2"}),"登出"]})})]}),e.jsxs("p",{className:"text-muted-foreground",children:["專注工作，提升生產力",t&&t.email&&` · ${t.email}`]}),o&&!w&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[e.jsx(Ct,{className:"w-3 h-3 inline animate-spin mr-1"}),"同步中..."]})]}),e.jsxs(pi,{value:g,onValueChange:v,className:"w-full",children:[e.jsxs(mi,{className:"grid w-full grid-cols-3 mb-8",children:[e.jsxs(gi,{value:"timer",className:"flex items-center gap-2",children:[e.jsx(zt,{className:"w-4 h-4"}),"計時器"]}),e.jsxs(gi,{value:"reports",className:"flex items-center gap-2",children:[e.jsx(_t,{className:"w-4 h-4"}),"報表"]}),e.jsxs(gi,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"w-4 h-4"}),"設定"]})]}),e.jsx(vi,{value:"timer",children:e.jsx(fi,{settings:p,onSessionComplete:async e=>{const r={...e,id:crypto.randomUUID()};f(e=>[...e,r]),t&&!w&&await a(r)},onUpdateSettings:k,sessions:h})}),e.jsx(vi,{value:"reports",children:e.jsx(Si,{sessions:h,onDeleteSession:async e=>{f(t=>t.filter(t=>t.id!==e)),t&&!w&&await l(e)},onClearTodaySessions:async()=>{const e=(new Date).toISOString().split("T")[0],r=h.filter(t=>t.date===e).map(e=>e.id);f(t=>t.filter(t=>t.date!==e)),t&&!w&&await c(r)},settings:p,onUpdateSettings:k})}),e.jsx(vi,{value:"settings",children:e.jsx(kl,{settings:p,onSettingsChange:k})})]})]})}):e.jsx(rh,{onSkip:_})}function oh(){return e.jsx(eh,{children:e.jsx(sh,{})})}H.createRoot(document.getElementById("root")).render(e.jsx(oh,{}));
